/*! For license information please see search-index-esm-5.0.0-rc1.js.LICENSE.txt */
var t={8918:(t,e,n)=>{const{fromCallback:i}=n(1553),r=n(7783),{getCallback:s,getOptions:o}=n(965),h=Symbol("promise"),c=Symbol("status"),a=Symbol("operations"),u=Symbol("finishClose"),l=Symbol("closeCallbacks");e.AbstractChainedBatch=class{constructor(t){if("object"!=typeof t||null===t)throw new TypeError("The first argument must be an abstract-level database, received "+(null===t?"null":typeof t));this[a]=[],this[l]=[],this[c]="open",this[u]=this[u].bind(this),this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get length(){return this[a].length}put(t,e,n){if("open"!==this[c])throw new r("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const i=this.db._checkKey(t)||this.db._checkValue(e);if(i)throw i;const s=n&&null!=n.sublevel?n.sublevel:this.db,o=n,h=s.keyEncoding(n&&n.keyEncoding),u=s.valueEncoding(n&&n.valueEncoding),l=h.format;n={...n,keyEncoding:l,valueEncoding:u.format},s!==this.db&&(n.sublevel=null);const f=s.prefixKey(h.encode(t),l),d=u.encode(e);return this._put(f,d,n),this[a].push({...o,type:"put",key:t,value:e}),this}_put(t,e,n){}del(t,e){if("open"!==this[c])throw new r("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const n=this.db._checkKey(t);if(n)throw n;const i=e&&null!=e.sublevel?e.sublevel:this.db,s=e,o=i.keyEncoding(e&&e.keyEncoding),h=o.format;return e={...e,keyEncoding:h},i!==this.db&&(e.sublevel=null),this._del(i.prefixKey(o.encode(t),h),e),this[a].push({...s,type:"del",key:t}),this}_del(t,e){}clear(){if("open"!==this[c])throw new r("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[a]=[],this}_clear(){}write(t,e){return e=s(t,e),e=i(e,h),t=o(t),"open"!==this[c]?this.nextTick(e,new r("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):0===this.length?this.close(e):(this[c]="writing",this._write(t,(t=>{this[c]="closing",this[l].push((()=>e(t))),t||this.db.emit("batch",this[a]),this._close(this[u])}))),e[h]}_write(t,e){}close(t){return t=i(t,h),"closing"===this[c]?this[l].push(t):"closed"===this[c]?this.nextTick(t):(this[l].push(t),"writing"!==this[c]&&(this[c]="closing",this._close(this[u]))),t[h]}_close(t){this.nextTick(t)}[u](){this[c]="closed",this.db.detachResource(this);const t=this[l];this[l]=[];for(const e of t)e()}}},2431:(t,e,n)=>{const{fromCallback:i}=n(1553),r=n(7783),{getOptions:s,getCallback:o}=n(965),h=Symbol("promise"),c=Symbol("callback"),a=Symbol("working"),u=Symbol("handleOne"),l=Symbol("handleMany"),f=Symbol("autoClose"),d=Symbol("finishWork"),p=Symbol("returnMany"),y=Symbol("closing"),g=Symbol("handleClose"),E=Symbol("closed"),m=Symbol("closeCallbacks"),b=Symbol("keyEncoding"),v=Symbol("valueEncoding"),w=Symbol("abortOnClose"),T=Symbol("legacy"),_=Symbol("keys"),L=Symbol("values"),A=Symbol("limit"),S=Symbol("count"),O=Object.freeze({}),k=()=>{};let x=!1;class I{constructor(t,e,n){if("object"!=typeof t||null===t)throw new TypeError("The first argument must be an abstract-level database, received "+(null===t?"null":typeof t));if("object"!=typeof e||null===e)throw new TypeError("The second argument must be an options object");this[E]=!1,this[m]=[],this[a]=!1,this[y]=!1,this[f]=!1,this[c]=null,this[u]=this[u].bind(this),this[l]=this[l].bind(this),this[g]=this[g].bind(this),this[b]=e[b],this[v]=e[v],this[T]=n,this[A]=Number.isInteger(e.limit)&&e.limit>=0?e.limit:1/0,this[S]=0,this[w]=!!e.abortOnClose,this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get count(){return this[S]}get limit(){return this[A]}next(t){let e;if(void 0===t)e=new Promise(((e,n)=>{t=(t,i,r)=>{t?n(t):this[T]?void 0===i&&void 0===r?e():e([i,r]):e(i)}}));else if("function"!=typeof t)throw new TypeError("Callback must be a function");return this[y]?this.nextTick(t,new r("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[a]?this.nextTick(t,new r("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[a]=!0,this[c]=t,this[S]>=this[A]?this.nextTick(this[u],null):this._next(this[u])),e}_next(t){this.nextTick(t)}nextv(t,e,n){return n=o(e,n),n=i(n,h),e=s(e,O),Number.isInteger(t)?(this[y]?this.nextTick(n,new r("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[a]?this.nextTick(n,new r("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(t<1&&(t=1),this[A]<1/0&&(t=Math.min(t,this[A]-this[S])),this[a]=!0,this[c]=n,t<=0?this.nextTick(this[l],null,[]):this._nextv(t,e,this[l])),n[h]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[h])}_nextv(t,e,n){const i=[],r=(e,s,o)=>e?n(e):(this[T]?void 0===s&&void 0===o:void 0===s)?n(null,i):(i.push(this[T]?[s,o]:s),void(i.length===t?n(null,i):this._next(r)));this._next(r)}all(t,e){return e=o(t,e),e=i(e,h),t=s(t,O),this[y]?this.nextTick(e,new r("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[a]?this.nextTick(e,new r("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[a]=!0,this[c]=e,this[f]=!0,this[S]>=this[A]?this.nextTick(this[l],null,[]):this._all(t,this[l])),e[h]}_all(t,e){let n=this[S];const i=[],r=()=>{const t=this[A]<1/0?Math.min(1e3,this[A]-n):1e3;t<=0?this.nextTick(e,null,i):this._nextv(t,O,s)},s=(t,s)=>{t?e(t):0===s.length?e(null,i):(i.push.apply(i,s),n+=s.length,r())};r()}[d](){const t=this[c];return this[w]&&null===t?k:(this[a]=!1,this[c]=null,this[y]&&this._close(this[g]),t)}[p](t,e,n){this[f]?this.close(t.bind(null,e,n)):t(e,n)}seek(t,e){if(e=s(e,O),this[y]);else{if(this[a])throw new r("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const n=this.db.keyEncoding(e.keyEncoding||this[b]),i=n.format;e.keyEncoding!==i&&(e={...e,keyEncoding:i});const r=this.db.prefixKey(n.encode(t),i);this._seek(r,e)}}}_seek(t,e){throw new r("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(t){return t=i(t,h),this[E]?this.nextTick(t):this[y]?this[m].push(t):(this[y]=!0,this[m].push(t),this[a]?this[w]&&this[d]()(new r("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[g])),t[h]}_close(t){this.nextTick(t)}[g](){this[E]=!0,this.db.detachResource(this);const t=this[m];this[m]=[];for(const e of t)e()}async*[Symbol.asyncIterator](){try{let t;for(;void 0!==(t=await this.next());)yield t}finally{this[E]||await this.close()}}}class B extends I{constructor(t,e){super(t,e,!0),this[_]=!1!==e.keys,this[L]=!1!==e.values}[u](t,e,n){const i=this[d]();if(t)return i(t);try{e=this[_]&&void 0!==e?this[b].decode(e):void 0,n=this[L]&&void 0!==n?this[v].decode(n):void 0}catch(t){return i(new C("entry",t))}void 0===e&&void 0===n||this[S]++,i(null,e,n)}[l](t,e){const n=this[d]();if(t)return this[p](n,t);try{for(const t of e){const e=t[0],n=t[1];t[0]=this[_]&&void 0!==e?this[b].decode(e):void 0,t[1]=this[L]&&void 0!==n?this[v].decode(n):void 0}}catch(t){return this[p](n,new C("entries",t))}this[S]+=e.length,this[p](n,null,e)}end(t){return x||"undefined"==typeof console||(x=!0,console.warn(new r("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(t)}}class C extends r{constructor(t,e){super(`Iterator could not decode ${t}`,{code:"LEVEL_DECODE_ERROR",cause:e})}}for(const t of["_ended property","_nexting property","_end method"])Object.defineProperty(B.prototype,t.split(" ")[0],{get(){throw new r(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new r(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});B.keyEncoding=b,B.valueEncoding=v,e.AbstractIterator=B,e.AbstractKeyIterator=class extends I{constructor(t,e){super(t,e,!1)}[u](t,e){const n=this[d]();if(t)return n(t);try{e=void 0!==e?this[b].decode(e):void 0}catch(t){return n(new C("key",t))}void 0!==e&&this[S]++,n(null,e)}[l](t,e){const n=this[d]();if(t)return this[p](n,t);try{for(let t=0;t<e.length;t++){const n=e[t];e[t]=void 0!==n?this[b].decode(n):void 0}}catch(t){return this[p](n,new C("keys",t))}this[S]+=e.length,this[p](n,null,e)}},e.AbstractValueIterator=class extends I{constructor(t,e){super(t,e,!1)}[u](t,e){const n=this[d]();if(t)return n(t);try{e=void 0!==e?this[v].decode(e):void 0}catch(t){return n(new C("value",t))}void 0!==e&&this[S]++,n(null,e)}[l](t,e){const n=this[d]();if(t)return this[p](n,t);try{for(let t=0;t<e.length;t++){const n=e[t];e[t]=void 0!==n?this[v].decode(n):void 0}}catch(t){return this[p](n,new C("values",t))}this[S]+=e.length,this[p](n,null,e)}}},4648:(t,e,n)=>{const{supports:i}=n(1599),{Transcoder:r}=n(263),{EventEmitter:s}=n(5683),{fromCallback:o}=n(1553),h=n(7783),{AbstractIterator:c}=n(2431),{DefaultKeyIterator:a,DefaultValueIterator:u}=n(3432),{DeferredIterator:l,DeferredKeyIterator:f,DeferredValueIterator:d}=n(5999),{DefaultChainedBatch:p}=n(7885),{getCallback:y,getOptions:g}=n(965),E=n(367),m=Symbol("promise"),b=Symbol("landed"),v=Symbol("resources"),w=Symbol("closeResources"),T=Symbol("operations"),_=Symbol("undefer"),L=Symbol("deferOpen"),A=Symbol("options"),S=Symbol("status"),O=Symbol("defaultOptions"),k=Symbol("transcoder"),x=Symbol("keyEncoding"),I=Symbol("valueEncoding"),B=()=>{};class C extends s{constructor(t,e){if(super(),"object"!=typeof t||null===t)throw new TypeError("The first argument 'manifest' must be an object");e=g(e);const{keyEncoding:n,valueEncoding:s,passive:o,...h}=e;this[v]=new Set,this[T]=[],this[L]=!0,this[A]=h,this[S]="opening",this.supports=i(t,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:!1!==t.snapshots,permanence:!1!==t.permanence,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:t.encodings||{},events:Object.assign({},t.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[k]=new r(U(this)),this[x]=this[k].encoding(n||"utf8"),this[I]=this[k].encoding(s||"utf8");for(const t of this[k].encodings())this.supports.encodings[t.commonName]||(this.supports.encodings[t.commonName]=!0);this[O]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[x].commonName,valueEncoding:this[I].commonName}),key:Object.freeze({keyEncoding:this[x].commonName})},this.nextTick((()=>{this[L]&&this.open({passive:!1},B)}))}get status(){return this[S]}keyEncoding(t){return this[k].encoding(null!=t?t:this[x])}valueEncoding(t){return this[k].encoding(null!=t?t:this[I])}open(t,e){e=y(t,e),e=o(e,m),(t={...this[A],...g(t)}).createIfMissing=!1!==t.createIfMissing,t.errorIfExists=!!t.errorIfExists;const n=t=>{"closing"===this[S]||"opening"===this[S]?this.once(b,t?()=>n(t):n):"open"!==this[S]?e(new h("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:t})):e()};return t.passive?"opening"===this[S]?this.once(b,n):this.nextTick(n):"closed"===this[S]||this[L]?(this[L]=!1,this[S]="opening",this.emit("opening"),this._open(t,(t=>{if(t)return this[S]="closed",this[w]((()=>{this.emit(b),n(t)})),void this[_]();this[S]="open",this[_](),this.emit(b),"open"===this[S]&&this.emit("open"),"open"===this[S]&&this.emit("ready"),n()}))):"open"===this[S]?this.nextTick(n):this.once(b,(()=>this.open(t,e))),e[m]}_open(t,e){this.nextTick(e)}close(t){t=o(t,m);const e=n=>{"opening"===this[S]||"closing"===this[S]?this.once(b,n?e(n):e):"closed"!==this[S]?t(new h("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):t()};if("open"===this[S]){this[S]="closing",this.emit("closing");const t=t=>{this[S]="open",this[_](),this.emit(b),e(t)};this[w]((()=>{this._close((n=>{if(n)return t(n);this[S]="closed",this[_](),this.emit(b),"closed"===this[S]&&this.emit("closed"),e()}))}))}else"closed"===this[S]?this.nextTick(e):this.once(b,(()=>this.close(t)));return t[m]}[w](t){if(0===this[v].size)return this.nextTick(t);let e=this[v].size,n=!0;const i=()=>{0==--e&&(n?this.nextTick(t):t())};for(const t of this[v])t.close(i);n=!1,this[v].clear()}_close(t){this.nextTick(t)}get(t,e,n){if(n=y(e,n),n=o(n,m),e=g(e,this[O].entry),"opening"===this[S])return this.defer((()=>this.get(t,e,n))),n[m];if(N(this,n))return n[m];const i=this._checkKey(t);if(i)return this.nextTick(n,i),n[m];const r=this.keyEncoding(e.keyEncoding),s=this.valueEncoding(e.valueEncoding),c=r.format,a=s.format;return e.keyEncoding===c&&e.valueEncoding===a||(e=Object.assign({},e,{keyEncoding:c,valueEncoding:a})),this._get(this.prefixKey(r.encode(t),c),e,((t,e)=>{if(t)return("LEVEL_NOT_FOUND"===t.code||t.notFound||/NotFound/i.test(t))&&(t.code||(t.code="LEVEL_NOT_FOUND"),t.notFound||(t.notFound=!0),t.status||(t.status=404)),n(t);try{e=s.decode(e)}catch(t){return n(new h("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:t}))}n(null,e)})),n[m]}_get(t,e,n){this.nextTick(n,new Error("NotFound"))}getMany(t,e,n){if(n=y(e,n),n=o(n,m),e=g(e,this[O].entry),"opening"===this[S])return this.defer((()=>this.getMany(t,e,n))),n[m];if(N(this,n))return n[m];if(!Array.isArray(t))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[m];if(0===t.length)return this.nextTick(n,null,[]),n[m];const i=this.keyEncoding(e.keyEncoding),r=this.valueEncoding(e.valueEncoding),s=i.format,c=r.format;e.keyEncoding===s&&e.valueEncoding===c||(e=Object.assign({},e,{keyEncoding:s,valueEncoding:c}));const a=new Array(t.length);for(let e=0;e<t.length;e++){const r=t[e],o=this._checkKey(r);if(o)return this.nextTick(n,o),n[m];a[e]=this.prefixKey(i.encode(r),s)}return this._getMany(a,e,((t,e)=>{if(t)return n(t);try{for(let t=0;t<e.length;t++)void 0!==e[t]&&(e[t]=r.decode(e[t]))}catch(t){return n(new h(`Could not decode one or more of ${e.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:t}))}n(null,e)})),n[m]}_getMany(t,e,n){this.nextTick(n,null,new Array(t.length).fill(void 0))}put(t,e,n,i){if(i=y(n,i),i=o(i,m),n=g(n,this[O].entry),"opening"===this[S])return this.defer((()=>this.put(t,e,n,i))),i[m];if(N(this,i))return i[m];const r=this._checkKey(t)||this._checkValue(e);if(r)return this.nextTick(i,r),i[m];const s=this.keyEncoding(n.keyEncoding),h=this.valueEncoding(n.valueEncoding),c=s.format,a=h.format;n.keyEncoding===c&&n.valueEncoding===a||(n=Object.assign({},n,{keyEncoding:c,valueEncoding:a}));const u=this.prefixKey(s.encode(t),c),l=h.encode(e);return this._put(u,l,n,(n=>{if(n)return i(n);this.emit("put",t,e),i()})),i[m]}_put(t,e,n,i){this.nextTick(i)}del(t,e,n){if(n=y(e,n),n=o(n,m),e=g(e,this[O].key),"opening"===this[S])return this.defer((()=>this.del(t,e,n))),n[m];if(N(this,n))return n[m];const i=this._checkKey(t);if(i)return this.nextTick(n,i),n[m];const r=this.keyEncoding(e.keyEncoding),s=r.format;return e.keyEncoding!==s&&(e=Object.assign({},e,{keyEncoding:s})),this._del(this.prefixKey(r.encode(t),s),e,(e=>{if(e)return n(e);this.emit("del",t),n()})),n[m]}_del(t,e,n){this.nextTick(n)}batch(t,e,n){if(!arguments.length){if("opening"===this[S])return new p(this);if("open"!==this[S])throw new h("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(n="function"==typeof t?t:y(e,n),n=o(n,m),e=g(e,this[O].empty),"opening"===this[S])return this.defer((()=>this.batch(t,e,n))),n[m];if(N(this,n))return n[m];if(!Array.isArray(t))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[m];if(0===t.length)return this.nextTick(n),n[m];const i=new Array(t.length),{keyEncoding:r,valueEncoding:s,...c}=e;for(let e=0;e<t.length;e++){if("object"!=typeof t[e]||null===t[e])return this.nextTick(n,new TypeError("A batch operation must be an object")),n[m];const o=Object.assign({},t[e]);if("put"!==o.type&&"del"!==o.type)return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[m];const h=this._checkKey(o.key);if(h)return this.nextTick(n,h),n[m];const c=null!=o.sublevel?o.sublevel:this,a=c.keyEncoding(o.keyEncoding||r),u=a.format;if(o.key=c.prefixKey(a.encode(o.key),u),o.keyEncoding=u,"put"===o.type){const t=this._checkValue(o.value);if(t)return this.nextTick(n,t),n[m];const e=c.valueEncoding(o.valueEncoding||s);o.value=e.encode(o.value),o.valueEncoding=e.format}c!==this&&(o.sublevel=null),i[e]=o}return this._batch(i,c,(e=>{if(e)return n(e);this.emit("batch",t),n()})),n[m]}_batch(t,e,n){this.nextTick(n)}sublevel(t,e){return this._sublevel(t,R.defaults(e))}_sublevel(t,e){return new R(this,t,e)}prefixKey(t,e){return t}clear(t,e){if(e=y(t,e),e=o(e,m),t=g(t,this[O].empty),"opening"===this[S])return this.defer((()=>this.clear(t,e))),e[m];if(N(this,e))return e[m];const n=t,i=this.keyEncoding(t.keyEncoding);return(t=E(t,i)).keyEncoding=i.format,0===t.limit?this.nextTick(e):this._clear(t,(t=>{if(t)return e(t);this.emit("clear",n),e()})),e[m]}_clear(t,e){this.nextTick(e)}iterator(t){const e=this.keyEncoding(t&&t.keyEncoding),n=this.valueEncoding(t&&t.valueEncoding);if((t=E(t,e)).keys=!1!==t.keys,t.values=!1!==t.values,t[c.keyEncoding]=e,t[c.valueEncoding]=n,t.keyEncoding=e.format,t.valueEncoding=n.format,"opening"===this[S])return new l(this,t);if("open"!==this[S])throw new h("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(t)}_iterator(t){return new c(this,t)}keys(t){const e=this.keyEncoding(t&&t.keyEncoding),n=this.valueEncoding(t&&t.valueEncoding);if((t=E(t,e))[c.keyEncoding]=e,t[c.valueEncoding]=n,t.keyEncoding=e.format,t.valueEncoding=n.format,"opening"===this[S])return new f(this,t);if("open"!==this[S])throw new h("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(t)}_keys(t){return new a(this,t)}values(t){const e=this.keyEncoding(t&&t.keyEncoding),n=this.valueEncoding(t&&t.valueEncoding);if((t=E(t,e))[c.keyEncoding]=e,t[c.valueEncoding]=n,t.keyEncoding=e.format,t.valueEncoding=n.format,"opening"===this[S])return new d(this,t);if("open"!==this[S])throw new h("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(t)}_values(t){return new u(this,t)}defer(t){if("function"!=typeof t)throw new TypeError("The first argument must be a function");this[T].push(t)}[_](){if(0===this[T].length)return;const t=this[T];this[T]=[];for(const e of t)e()}attachResource(t){if("object"!=typeof t||null===t||"function"!=typeof t.close)throw new TypeError("The first argument must be a resource object");this[v].add(t)}detachResource(t){this[v].delete(t)}_chainedBatch(){return new p(this)}_checkKey(t){if(null==t)return new h("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(t){if(null==t)return new h("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}}C.prototype.nextTick=n(5763);const{AbstractSublevel:R}=n(2627)({AbstractLevel:C});e.AbstractLevel=C,e.AbstractSublevel=R;const N=function(t,e){return"open"!==t[S]&&(t.nextTick(e,new h("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0)},U=function(t){return Object.keys(t.supports.encodings).filter((e=>!!t.supports.encodings[e]))}},7589:(t,e,n)=>{e.AbstractLevel=n(4648).AbstractLevel,e.AbstractSublevel=n(4648).AbstractSublevel,e.AbstractIterator=n(2431).AbstractIterator,e.AbstractKeyIterator=n(2431).AbstractKeyIterator,e.AbstractValueIterator=n(2431).AbstractValueIterator,e.AbstractChainedBatch=n(8918).AbstractChainedBatch},5053:(t,e,n)=>{const{AbstractIterator:i,AbstractKeyIterator:r,AbstractValueIterator:s}=n(2431),o=Symbol("unfix"),h=Symbol("iterator"),c=Symbol("handleOne"),a=Symbol("handleMany"),u=Symbol("callback");class l extends i{constructor(t,e,n,i){super(t,e),this[h]=n,this[o]=i,this[c]=this[c].bind(this),this[a]=this[a].bind(this),this[u]=null}[c](t,e,n){const i=this[u];if(t)return i(t);void 0!==e&&(e=this[o](e)),i(t,e,n)}[a](t,e){const n=this[u];if(t)return n(t);for(const t of e){const e=t[0];void 0!==e&&(t[0]=this[o](e))}n(t,e)}}class f extends r{constructor(t,e,n,i){super(t,e),this[h]=n,this[o]=i,this[c]=this[c].bind(this),this[a]=this[a].bind(this),this[u]=null}[c](t,e){const n=this[u];if(t)return n(t);void 0!==e&&(e=this[o](e)),n(t,e)}[a](t,e){const n=this[u];if(t)return n(t);for(let t=0;t<e.length;t++){const n=e[t];void 0!==n&&(e[t]=this[o](n))}n(t,e)}}class d extends s{constructor(t,e,n){super(t,e),this[h]=n}}for(const t of[l,f])t.prototype._next=function(t){this[u]=t,this[h].next(this[c])},t.prototype._nextv=function(t,e,n){this[u]=n,this[h].nextv(t,e,this[a])},t.prototype._all=function(t,e){this[u]=e,this[h].all(t,this[a])};for(const t of[d])t.prototype._next=function(t){this[h].next(t)},t.prototype._nextv=function(t,e,n){this[h].nextv(t,e,n)},t.prototype._all=function(t,e){this[h].all(t,e)};for(const t of[l,f,d])t.prototype._seek=function(t,e){this[h].seek(t,e)},t.prototype._close=function(t){this[h].close(t)};e.AbstractSublevelIterator=l,e.AbstractSublevelKeyIterator=f,e.AbstractSublevelValueIterator=d},2627:(t,e,n)=>{const i=n(7783),{Buffer:r}=n(2186)||{},{AbstractSublevelIterator:s,AbstractSublevelKeyIterator:o,AbstractSublevelValueIterator:h}=n(5053),c=Symbol("prefix"),a=Symbol("upperBound"),u=Symbol("prefixRange"),l=Symbol("parent"),f=Symbol("unfix"),d=new TextEncoder,p={separator:"!"};t.exports=function({AbstractLevel:t}){class e extends t{static defaults(t){if("string"==typeof t)throw new i("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(t&&t.open)throw new i("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return null==t?p:t.separator?t:{...t,separator:"!"}}constructor(t,n,r){const{separator:s,manifest:o,...h}=e.defaults(r);n=b(n,s);const u=s.charCodeAt(0)+1,p=t[l]||t;if(!d.encode(n).every((t=>t>u&&t<127)))throw new i(`Prefix must use bytes > ${u} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(y(p,o),h);const g=(t.prefix||"")+s+n+s,v=g.slice(0,-1)+String.fromCharCode(u);this[l]=p,this[c]=new E(g),this[a]=new E(v),this[f]=new m,this.nextTick=p.nextTick}prefixKey(t,e){if("utf8"===e)return this[c].utf8+t;if(0===t.byteLength)return this[c][e];if("view"===e){const e=this[c].view,n=new Uint8Array(e.byteLength+t.byteLength);return n.set(e,0),n.set(t,e.byteLength),n}{const e=this[c].buffer;return r.concat([e,t],e.byteLength+t.byteLength)}}[u](t,e){void 0!==t.gte?t.gte=this.prefixKey(t.gte,e):void 0!==t.gt?t.gt=this.prefixKey(t.gt,e):t.gte=this[c][e],void 0!==t.lte?t.lte=this.prefixKey(t.lte,e):void 0!==t.lt?t.lt=this.prefixKey(t.lt,e):t.lte=this[a][e]}get prefix(){return this[c].utf8}get db(){return this[l]}_open(t,e){this[l].open({passive:!0},e)}_put(t,e,n,i){this[l].put(t,e,n,i)}_get(t,e,n){this[l].get(t,e,n)}_getMany(t,e,n){this[l].getMany(t,e,n)}_del(t,e,n){this[l].del(t,e,n)}_batch(t,e,n){this[l].batch(t,e,n)}_clear(t,e){this[u](t,t.keyEncoding),this[l].clear(t,e)}_iterator(t){this[u](t,t.keyEncoding);const e=this[l].iterator(t),n=this[f].get(this[c].utf8.length,t.keyEncoding);return new s(this,t,e,n)}_keys(t){this[u](t,t.keyEncoding);const e=this[l].keys(t),n=this[f].get(this[c].utf8.length,t.keyEncoding);return new o(this,t,e,n)}_values(t){this[u](t,t.keyEncoding);const e=this[l].values(t);return new h(this,t,e)}}return{AbstractSublevel:e}};const y=function(t,e){return{...t.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:g(t,"utf8"),buffer:g(t,"buffer"),view:g(t,"view")}}},g=function(t,e){return!!t.supports.encodings[e]&&t.keyEncoding(e).name===e};class E{constructor(t){this.utf8=t,this.view=d.encode(t),this.buffer=r?r.from(this.view.buffer,0,this.view.byteLength):{}}}class m{constructor(){this.cache=new Map}get(t,e){let n=this.cache.get(e);return void 0===n&&(n="view"===e?function(t,e){return e.subarray(t)}.bind(null,t):function(t,e){return e.slice(t)}.bind(null,t),this.cache.set(e,n)),n}}const b=function(t,e){let n=0,i=t.length;for(;n<i&&t[n]===e;)n++;for(;i>n&&t[i-1]===e;)i--;return t.slice(n,i)}},965:(t,e)=>{e.getCallback=function(t,e){return"function"==typeof t?t:e},e.getOptions=function(t,e){return"object"==typeof t&&null!==t?t:void 0!==e?e:{}}},7885:(t,e,n)=>{const{AbstractChainedBatch:i}=n(8918),r=n(7783),s=Symbol("encoded");e.DefaultChainedBatch=class extends i{constructor(t){super(t),this[s]=[]}_put(t,e,n){this[s].push({...n,type:"put",key:t,value:e})}_del(t,e){this[s].push({...e,type:"del",key:t})}_clear(){this[s]=[]}_write(t,e){"opening"===this.db.status?this.db.defer((()=>this._write(t,e))):"open"===this.db.status?0===this[s].length?this.nextTick(e):this.db._batch(this[s],t,e):this.nextTick(e,new r("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}}},3432:(t,e,n)=>{const{AbstractKeyIterator:i,AbstractValueIterator:r}=n(2431),s=Symbol("iterator"),o=Symbol("callback"),h=Symbol("handleOne"),c=Symbol("handleMany");class a extends i{constructor(t,e){super(t,e),this[s]=t.iterator({...e,keys:!0,values:!1}),this[h]=this[h].bind(this),this[c]=this[c].bind(this)}}class u extends r{constructor(t,e){super(t,e),this[s]=t.iterator({...e,keys:!1,values:!0}),this[h]=this[h].bind(this),this[c]=this[c].bind(this)}}for(const t of[a,u]){const e=t===a,n=e?t=>t[0]:t=>t[1];t.prototype._next=function(t){this[o]=t,this[s].next(this[h])},t.prototype[h]=function(t,n,i){const r=this[o];t?r(t):r(null,e?n:i)},t.prototype._nextv=function(t,e,n){this[o]=n,this[s].nextv(t,e,this[c])},t.prototype._all=function(t,e){this[o]=e,this[s].all(t,this[c])},t.prototype[c]=function(t,e){const i=this[o];t?i(t):i(null,e.map(n))},t.prototype._seek=function(t,e){this[s].seek(t,e)},t.prototype._close=function(t){this[s].close(t)}}e.DefaultKeyIterator=a,e.DefaultValueIterator=u},5999:(t,e,n)=>{const{AbstractIterator:i,AbstractKeyIterator:r,AbstractValueIterator:s}=n(2431),o=n(7783),h=Symbol("nut"),c=Symbol("undefer"),a=Symbol("factory");class u extends i{constructor(t,e){super(t,e),this[h]=null,this[a]=()=>t.iterator(e),this.db.defer((()=>this[c]()))}}class l extends r{constructor(t,e){super(t,e),this[h]=null,this[a]=()=>t.keys(e),this.db.defer((()=>this[c]()))}}class f extends s{constructor(t,e){super(t,e),this[h]=null,this[a]=()=>t.values(e),this.db.defer((()=>this[c]()))}}for(const t of[u,l,f])t.prototype[c]=function(){"open"===this.db.status&&(this[h]=this[a]())},t.prototype._next=function(t){null!==this[h]?this[h].next(t):"opening"===this.db.status?this.db.defer((()=>this._next(t))):this.nextTick(t,new o("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(t,e,n){null!==this[h]?this[h].nextv(t,e,n):"opening"===this.db.status?this.db.defer((()=>this._nextv(t,e,n))):this.nextTick(n,new o("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(t,e){null!==this[h]?this[h].all(e):"opening"===this.db.status?this.db.defer((()=>this._all(t,e))):this.nextTick(e,new o("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(t,e){null!==this[h]?this[h]._seek(t,e):"opening"===this.db.status&&this.db.defer((()=>this._seek(t,e)))},t.prototype._close=function(t){null!==this[h]?this[h].close(t):"opening"===this.db.status?this.db.defer((()=>this._close(t))):this.nextTick(t)};e.DeferredIterator=u,e.DeferredKeyIterator=l,e.DeferredValueIterator=f},5763:(t,e,n)=>{const i=n(6958);t.exports=function(t,...e){0===e.length?i(t):i((()=>t(...e)))}},367:(t,e,n)=>{const i=n(7783),r=Object.prototype.hasOwnProperty,s=new Set(["lt","lte","gt","gte"]);t.exports=function(t,e){const n={};for(const o in t)if(r.call(t,o)&&"keyEncoding"!==o&&"valueEncoding"!==o){if("start"===o||"end"===o)throw new i(`The legacy range option '${o}' has been removed`,{code:"LEVEL_LEGACY"});if("encoding"===o)throw new i("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});s.has(o)?n[o]=e.encode(t[o]):n[o]=t[o]}return n.reverse=!!n.reverse,n.limit=Number.isInteger(n.limit)&&n.limit>=0?n.limit:-1,n}},1599:(t,e)=>{e.supports=function(...t){const e=t.reduce(((t,e)=>Object.assign(t,e)),{});return Object.assign(e,{snapshots:e.snapshots||!1,permanence:e.permanence||!1,seek:e.seek||!1,clear:e.clear||!1,getMany:e.getMany||!1,keyIterator:e.keyIterator||!1,valueIterator:e.valueIterator||!1,iteratorNextv:e.iteratorNextv||!1,iteratorAll:e.iteratorAll||!1,status:e.status||!1,createIfMissing:e.createIfMissing||!1,errorIfExists:e.errorIfExists||!1,deferredOpen:e.deferredOpen||!1,promises:e.promises||!1,streams:e.streams||!1,encodings:Object.assign({},e.encodings),events:Object.assign({},e.events),additionalMethods:Object.assign({},e.additionalMethods)})}},4415:(t,e)=>{e.byteLength=function(t){var e=h(t),n=e[0],i=e[1];return 3*(n+i)/4-i},e.toByteArray=function(t){var e,n,s=h(t),o=s[0],c=s[1],a=new r(function(t,e,n){return 3*(e+n)/4-n}(0,o,c)),u=0,l=c>0?o-4:o;for(n=0;n<l;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;return 2===c&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,a[u++]=255&e),1===c&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e),a},e.fromByteArray=function(t){for(var e,i=t.length,r=i%3,s=[],o=16383,h=0,a=i-r;h<a;h+=o)s.push(c(t,h,h+o>a?a:h+o));return 1===r?(e=t[i-1],s.push(n[e>>2]+n[e<<4&63]+"==")):2===r&&(e=(t[i-2]<<8)+t[i-1],s.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),s.join("")};for(var n=[],i=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)n[o]=s[o],i[s.charCodeAt(o)]=o;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,i){for(var r,s,o=[],h=e;h<i;h+=3)r=(t[h]<<16&16711680)+(t[h+1]<<8&65280)+(255&t[h+2]),o.push(n[(s=r)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},6096:(t,e,n)=>{const{AbstractLevel:i}=n(7589),r=n(7783),s=n(439),{fromCallback:o}=n(1553),{Iterator:h}=n(5349),c=n(3948),a=n(2824),u=n(7552),l="level-js-",f=Symbol("idb"),d=Symbol("namePrefix"),p=Symbol("location"),y=Symbol("version"),g=Symbol("store"),E=Symbol("onComplete"),m=Symbol("promise");class b extends i{constructor(t,e,n){if("function"==typeof e||"function"==typeof n)throw new r("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:i,version:s,...o}=e||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},o),"string"!=typeof t)throw new Error("constructor requires a location string argument");this[p]=t,this[d]=null==i?l:i,this[y]=parseInt(s||1,10),this[f]=null}get location(){return this[p]}get namePrefix(){return this[d]}get version(){return this[y]}get db(){return this[f]}get type(){return"browser-level"}_open(t,e){const n=indexedDB.open(this[d]+this[p],this[y]);n.onerror=function(){e(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[f]=n.result,e()},n.onupgradeneeded=t=>{const e=t.target.result;e.objectStoreNames.contains(this[p])||e.createObjectStore(this[p])}}[g](t){return this[f].transaction([this[p]],t).objectStore(this[p])}[E](t,e){const n=t.transaction;n.onabort=function(){e(n.error||new Error("aborted by user"))},n.oncomplete=function(){e(null,t.result)}}_get(t,e,n){const i=this[g]("readonly");let s;try{s=i.get(t)}catch(t){return this.nextTick(n,t)}this[E](s,(function(t,e){return t?n(t):void 0===e?n(new r("Entry not found",{code:"LEVEL_NOT_FOUND"})):void n(null,c(e))}))}_getMany(t,e,n){const i=this[g]("readonly"),r=t.map((t=>e=>{let n;try{n=i.get(t)}catch(t){return e(t)}n.onsuccess=()=>{const t=n.result;e(null,void 0===t?t:c(t))},n.onerror=t=>{t.stopPropagation(),e(n.error)}}));s(r,16,n)}_del(t,e,n){const i=this[g]("readwrite");let r;try{r=i.delete(t)}catch(t){return this.nextTick(n,t)}this[E](r,n)}_put(t,e,n,i){const r=this[g]("readwrite");let s;try{s=r.put(e,t)}catch(t){return this.nextTick(i,t)}this[E](s,i)}_iterator(t){return new h(this,this[p],t)}_batch(t,e,n){const i=this[g]("readwrite"),r=i.transaction;let s,o=0;r.onabort=function(){n(s||r.error||new Error("aborted by user"))},r.oncomplete=function(){n()},function e(){const n=t[o++],h=n.key;let c;try{c="del"===n.type?i.delete(h):i.put(n.value,h)}catch(t){return s=t,void r.abort()}o<t.length?c.onsuccess=e:"function"==typeof r.commit&&r.commit()}()}_clear(t,e){let n,i;try{n=u(t)}catch(t){return this.nextTick(e)}if(t.limit>=0)return a(this,this[p],n,t,e);try{const t=this[g]("readwrite");i=n?t.delete(n):t.clear()}catch(t){return this.nextTick(e,t)}this[E](i,e)}_close(t){this[f].close(),this.nextTick(t)}}b.destroy=function(t,e,n){"function"==typeof e&&(n=e,e=l),n=o(n,m);const i=indexedDB.deleteDatabase(e+t);return i.onsuccess=function(){n()},i.onerror=function(t){n(t)},n[m]},e.v=b},5349:(t,e,n)=>{const{AbstractIterator:i}=n(7589),r=n(7552),s=n(3948),o=Symbol("cache"),h=Symbol("finished"),c=Symbol("options"),a=Symbol("currentOptions"),u=Symbol("position"),l=Symbol("location"),f=Symbol("first"),d={};function p(t){"function"==typeof t.commit&&t.commit()}e.Iterator=class extends i{constructor(t,e,n){super(t,n),this[o]=[],this[h]=0===this.limit,this[c]=n,this[a]={...n},this[u]=void 0,this[l]=e,this[f]=!0}_nextv(t,e,n){if(this[f]=!1,this[h])return this.nextTick(n,null,[]);if(this[o].length>0)return t=Math.min(t,this[o].length),this.nextTick(n,null,this[o].splice(0,t));let i;void 0!==this[u]&&(this[c].reverse?(this[a].lt=this[u],this[a].lte=void 0):(this[a].gt=this[u],this[a].gte=void 0));try{i=r(this[a])}catch(t){return this[h]=!0,this.nextTick(n,null,[])}const d=this.db.db.transaction([this[l]],"readonly"),y=d.objectStore(this[l]),g=[];if(this[c].reverse)y[!this[c].values&&y.openKeyCursor?"openKeyCursor":"openCursor"](i,"prev").onsuccess=e=>{const n=e.target.result;if(n){const{key:e,value:i}=n;this[u]=e,g.push([this[c].keys&&void 0!==e?s(e):void 0,this[c].values&&void 0!==i?s(i):void 0]),g.length<t?n.continue():p(d)}else this[h]=!0};else{let e,n;const r=()=>{if(void 0===e||void 0===n)return;const i=Math.max(e.length,n.length);0===i||t===1/0?this[h]=!0:this[u]=e[i-1],g.length=i;for(let t=0;t<i;t++){const i=e[t],r=n[t];g[t]=[this[c].keys&&void 0!==i?s(i):void 0,this[c].values&&void 0!==r?s(r):void 0]}p(d)};this[c].keys||t<1/0?y.getAllKeys(i,t<1/0?t:void 0).onsuccess=t=>{e=t.target.result,r()}:(e=[],this.nextTick(r)),this[c].values?y.getAll(i,t<1/0?t:void 0).onsuccess=t=>{n=t.target.result,r()}:(n=[],this.nextTick(r))}d.onabort=()=>{n(d.error||new Error("aborted by user")),n=null},d.oncomplete=()=>{n(null,g),n=null}}_next(t){if(this[o].length>0){const[e,n]=this[o].shift();this.nextTick(t,null,e,n)}else if(this[h])this.nextTick(t);else{let e=Math.min(100,this.limit-this.count);this[f]&&(this[f]=!1,e=1),this._nextv(e,d,((e,n)=>{if(e)return t(e);this[o]=n,this._next(t)}))}}_all(t,e){this[f]=!1;const n=this[o].splice(0,this[o].length),i=this.limit-this.count-n.length;if(i<=0)return this.nextTick(e,null,n);this._nextv(i,d,((t,i)=>{if(t)return e(t);n.length>0&&(i=n.concat(i)),e(null,i)}))}_seek(t,e){let n;this[f]=!0,this[o]=[],this[h]=!1,this[u]=void 0,this[a]={...this[c]};try{n=r(this[c])}catch(t){return void(this[h]=!0)}null===n||n.includes(t)?this[c].reverse?this[a].lte=t:this[a].gte=t:this[h]=!0}}},2824:t=>{t.exports=function(t,e,n,i,r){if(0===i.limit)return t.nextTick(r);const s=t.db.transaction([e],"readwrite"),o=s.objectStore(e);let h=0;s.oncomplete=function(){r()},s.onabort=function(){r(s.error||new Error("aborted by user"))};const c=o.openKeyCursor?"openKeyCursor":"openCursor",a=i.reverse?"prev":"next";o[c](n,a).onsuccess=function(t){const e=t.target.result;e&&(o.delete(e.key).onsuccess=function(){(i.limit<=0||++h<i.limit)&&e.continue()})}}},3948:t=>{const e=new TextEncoder;t.exports=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):e.encode(t)}},7552:t=>{t.exports=function(t){const e=void 0!==t.gte?t.gte:void 0!==t.gt?t.gt:void 0,n=void 0!==t.lte?t.lte:void 0!==t.lt?t.lt:void 0,i=void 0===t.gte,r=void 0===t.lte;return void 0!==e&&void 0!==n?IDBKeyRange.bound(e,n,i,r):void 0!==e?IDBKeyRange.lowerBound(e,i):void 0!==n?IDBKeyRange.upperBound(n,r):null}},2186:(t,e,n)=>{const i=n(4415),r=n(7378),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},e.INSPECT_MAX_BYTES=50;const o=2147483647;function h(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,c.prototype),e}function c(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}return a(t,e,n)}function a(t,e,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|y(t,e);let i=h(n);const r=i.write(t,e);return r!==n&&(i=i.slice(0,r)),i}(t,e);if(ArrayBuffer.isView(t))return function(t){if(X(t,Uint8Array)){const e=new Uint8Array(t);return d(e.buffer,e.byteOffset,e.byteLength)}return f(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(X(t,ArrayBuffer)||t&&X(t.buffer,ArrayBuffer))return d(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(X(t,SharedArrayBuffer)||t&&X(t.buffer,SharedArrayBuffer)))return d(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return c.from(i,e,n);const r=function(t){if(c.isBuffer(t)){const e=0|p(t.length),n=h(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||J(t.length)?h(0):f(t):"Buffer"===t.type&&Array.isArray(t.data)?f(t.data):void 0}(t);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return u(t),h(t<0?0:0|p(t))}function f(t){const e=t.length<0?0:0|p(t.length),n=h(e);for(let i=0;i<e;i+=1)n[i]=255&t[i];return n}function d(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(i,c.prototype),i}function p(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function y(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||X(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;let r=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(t).length;default:if(r)return i?-1:W(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){let i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,n);case"utf8":case"utf-8":return S(this,e,n);case"ascii":return k(this,e,n);case"latin1":case"binary":return x(this,e,n);case"base64":return A(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function E(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function m(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),J(n=+n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=c.from(e,i)),c.isBuffer(e))return 0===e.length?-1:b(t,e,n,i,r);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,i,r){let s,o=1,h=t.length,c=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;o=2,h/=2,c/=2,n/=2}function a(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(r){let i=-1;for(s=n;s<h;s++)if(a(t,s)===a(e,-1===i?0:s-i)){if(-1===i&&(i=s),s-i+1===c)return i*o}else-1!==i&&(s-=s-i),i=-1}else for(n+c>h&&(n=h-c),s=n;s>=0;s--){let n=!0;for(let i=0;i<c;i++)if(a(t,s+i)!==a(e,i)){n=!1;break}if(n)return s}return-1}function v(t,e,n,i){n=Number(n)||0;const r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;const s=e.length;let o;for(i>s/2&&(i=s/2),o=0;o<i;++o){const i=parseInt(e.substr(2*o,2),16);if(J(i))return o;t[n+o]=i}return o}function w(t,e,n,i){return H(W(e,t.length-n),t,n,i)}function T(t,e,n,i){return H(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function _(t,e,n,i){return H(Y(e),t,n,i)}function L(t,e,n,i){return H(function(t,e){let n,i,r;const s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),i=n>>8,r=n%256,s.push(r),s.push(i);return s}(e,t.length-n),t,n,i)}function A(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function S(t,e,n){n=Math.min(t.length,n);const i=[];let r=e;for(;r<n;){const e=t[r];let s=null,o=e>239?4:e>223?3:e>191?2:1;if(r+o<=n){let n,i,h,c;switch(o){case 1:e<128&&(s=e);break;case 2:n=t[r+1],128==(192&n)&&(c=(31&e)<<6|63&n,c>127&&(s=c));break;case 3:n=t[r+1],i=t[r+2],128==(192&n)&&128==(192&i)&&(c=(15&e)<<12|(63&n)<<6|63&i,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:n=t[r+1],i=t[r+2],h=t[r+3],128==(192&n)&&128==(192&i)&&128==(192&h)&&(c=(15&e)<<18|(63&n)<<12|(63&i)<<6|63&h,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s),r+=o}return function(t){const e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);let n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=O));return n}(i)}e.kMaxLength=o,c.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(t,e,n){return a(t,e,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(t,e,n){return function(t,e,n){return u(t),t<=0?h(t):void 0!==e?"string"==typeof n?h(t).fill(e,n):h(t).fill(e):h(t)}(t,e,n)},c.allocUnsafe=function(t){return l(t)},c.allocUnsafeSlow=function(t){return l(t)},c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(X(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),X(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,i=e.length;for(let r=0,s=Math.min(n,i);r<s;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const i=c.allocUnsafe(e);let r=0;for(n=0;n<t.length;++n){let e=t[n];if(X(e,Uint8Array))r+e.length>i.length?(c.isBuffer(e)||(e=c.from(e)),e.copy(i,r)):Uint8Array.prototype.set.call(i,e,r);else{if(!c.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(i,r)}r+=e.length}return i},c.byteLength=y,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)E(this,e,e+1);return this},c.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)E(this,e,e+3),E(this,e+1,e+2);return this},c.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)E(this,e,e+7),E(this,e+1,e+6),E(this,e+2,e+5),E(this,e+3,e+4);return this},c.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?S(this,0,t):g.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){let t="";const n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},s&&(c.prototype[s]=c.prototype.inspect),c.prototype.compare=function(t,e,n,i,r){if(X(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(this===t)return 0;let s=(r>>>=0)-(i>>>=0),o=(n>>>=0)-(e>>>=0);const h=Math.min(s,o),a=this.slice(i,r),u=t.slice(e,n);for(let t=0;t<h;++t)if(a[t]!==u[t]){s=a[t],o=u[t];break}return s<o?-1:o<s?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},c.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}const r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":case"latin1":case"binary":return T(this,t,e,n);case"base64":return _(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const O=4096;function k(t,e,n){let i="";n=Math.min(t.length,n);for(let r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function x(t,e,n){let i="";n=Math.min(t.length,n);for(let r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function I(t,e,n){const i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);let r="";for(let i=e;i<n;++i)r+=q[t[i]];return r}function B(t,e,n){const i=t.slice(e,n);let r="";for(let t=0;t<i.length-1;t+=2)r+=String.fromCharCode(i[t]+256*i[t+1]);return r}function C(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,i,r,s){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<s)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function N(t,e,n,i,r){z(e,i,r,t,n,7);let s=Number(e&BigInt(4294967295));t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,n}function U(t,e,n,i,r){z(e,i,r,t,n,7);let s=Number(e&BigInt(4294967295));t[n+7]=s,s>>=8,t[n+6]=s,s>>=8,t[n+5]=s,s>>=8,t[n+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=o,o>>=8,t[n+2]=o,o>>=8,t[n+1]=o,o>>=8,t[n]=o,n+8}function D(t,e,n,i,r,s){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(t,e,n,i,s){return e=+e,n>>>=0,s||D(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function P(t,e,n,i,s){return e=+e,n>>>=0,s||D(t,0,n,8),r.write(t,e,n,i,52,8),n+8}c.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const i=this.subarray(t,e);return Object.setPrototypeOf(i,c.prototype),i},c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let i=this[t],r=1,s=0;for(;++s<e&&(r*=256);)i+=this[t+s]*r;return i},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let i=this[t+--e],r=1;for(;e>0&&(r*=256);)i+=this[t+--e]*r;return i},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readBigUInt64LE=Q((function(t){G(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||$(t,this.length-8);const i=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,r=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(i)+(BigInt(r)<<BigInt(32))})),c.prototype.readBigUInt64BE=Q((function(t){G(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||$(t,this.length-8);const i=e*2**24+65536*this[++t]+256*this[++t]+this[++t],r=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(i)<<BigInt(32))+BigInt(r)})),c.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let i=this[t],r=1,s=0;for(;++s<e&&(r*=256);)i+=this[t+s]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*e)),i},c.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let i=e,r=1,s=this[t+--i];for(;i>0&&(r*=256);)s+=this[t+--i]*r;return r*=128,s>=r&&(s-=Math.pow(2,8*e)),s},c.prototype.readInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||C(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){t>>>=0,e||C(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readBigInt64LE=Q((function(t){G(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||$(t,this.length-8);const i=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),c.prototype.readBigInt64BE=Q((function(t){G(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||$(t,this.length-8);const i=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(i)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),c.prototype.readFloatLE=function(t,e){return t>>>=0,e||C(t,4,this.length),r.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||C(t,4,this.length),r.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||C(t,8,this.length),r.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||C(t,8,this.length),r.read(this,t,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,n,i){t=+t,e>>>=0,n>>>=0,i||R(this,t,e,n,Math.pow(2,8*n)-1,0);let r=1,s=0;for(this[e]=255&t;++s<n&&(r*=256);)this[e+s]=t/r&255;return e+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,n,i){t=+t,e>>>=0,n>>>=0,i||R(this,t,e,n,Math.pow(2,8*n)-1,0);let r=n-1,s=1;for(this[e+r]=255&t;--r>=0&&(s*=256);)this[e+r]=t/s&255;return e+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigUInt64LE=Q((function(t,e=0){return N(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=Q((function(t,e=0){return U(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e>>>=0,!i){const i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}let r=0,s=1,o=0;for(this[e]=255&t;++r<n&&(s*=256);)t<0&&0===o&&0!==this[e+r-1]&&(o=1),this[e+r]=(t/s>>0)-o&255;return e+n},c.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e>>>=0,!i){const i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}let r=n-1,s=1,o=0;for(this[e+r]=255&t;--r>=0&&(s*=256);)t<0&&0===o&&0!==this[e+r+1]&&(o=1),this[e+r]=(t/s>>0)-o&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigInt64LE=Q((function(t,e=0){return N(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=Q((function(t,e=0){return U(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return P(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return P(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,i){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);const r=i-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,i):Uint8Array.prototype.set.call(t,this.subarray(n,i),e),r},c.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===t.length){const e=t.charCodeAt(0);("utf8"===i&&e<128||"latin1"===i)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let r;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(r=e;r<n;++r)this[r]=t;else{const s=c.isBuffer(t)?t:c.from(t,i),o=s.length;if(0===o)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(r=0;r<n-e;++r)this[r+e]=s[r%o]}return this};const M={};function V(t,e,n){M[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function j(t){let e="",n=t.length;const i="-"===t[0]?1:0;for(;n>=i+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function z(t,e,n,i,r,s){if(t>n||t<e){const i="bigint"==typeof e?"n":"";let r;throw r=s>3?0===e||e===BigInt(0)?`>= 0${i} and < 2${i} ** ${8*(s+1)}${i}`:`>= -(2${i} ** ${8*(s+1)-1}${i}) and < 2 ** ${8*(s+1)-1}${i}`:`>= ${e}${i} and <= ${n}${i}`,new M.ERR_OUT_OF_RANGE("value",r,t)}!function(t,e,n){G(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||$(e,t.length-(n+1))}(i,r,s)}function G(t,e){if("number"!=typeof t)throw new M.ERR_INVALID_ARG_TYPE(e,"number",t)}function $(t,e,n){if(Math.floor(t)!==t)throw G(t,n),new M.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new M.ERR_BUFFER_OUT_OF_BOUNDS;throw new M.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}V("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),V("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),V("ERR_OUT_OF_RANGE",(function(t,e,n){let i=`The value of "${t}" is out of range.`,r=n;return Number.isInteger(n)&&Math.abs(n)>2**32?r=j(String(n)):"bigint"==typeof n&&(r=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(r=j(r)),r+="n"),i+=` It must be ${e}. Received ${r}`,i}),RangeError);const K=/[^+/0-9A-Za-z-_]/g;function W(t,e){let n;e=e||1/0;const i=t.length;let r=null;const s=[];for(let o=0;o<i;++o){if(n=t.charCodeAt(o),n>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===i){(e-=3)>-1&&s.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&s.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function Y(t){return i.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(K,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,n,i){let r;for(r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}function X(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function J(t){return t!=t}const q=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const i=16*n;for(let r=0;r<16;++r)e[i+r]=t[n]+t[r]}return e}();function Q(t){return"undefined"==typeof BigInt?Z:t}function Z(){throw new Error("BigInt not supported")}},1553:(t,e,n)=>{var i=n(2249);e.fromCallback=function(t,e){if(void 0===t){var n=new Promise((function(e,n){t=function(t,i){t?n(t):e(i)}}));t[void 0!==e?e:"promise"]=n}else if("function"!=typeof t)throw new TypeError("Callback must be a function");return t},e.fromPromise=function(t,e){if(void 0===e)return t;t.then((function(t){i((()=>e(null,t)))})).catch((function(t){i((()=>e(t)))}))}},2249:t=>{t.exports="function"==typeof queueMicrotask?queueMicrotask:t=>Promise.resolve().then(t)},6580:(t,e)=>{function n(t){for(var e="",n=0;n<t.length;n++){var i=t[n];isNaN(Number(i))||" "===i?"-"!==i&&(e+=i):e+=String(9-Number(i))}return e}e.encode=function(t){if(isNaN(t))return"DaN";if(0===t)return"FE  0M0";if(t===1/0)return"FF";if(t===-1/0)return"DD";var e,i=t.toExponential().split("e"),r=Number(i[1])+500,s=i[0]+(-1===i[0].indexOf(".")?".":"")+"0".repeat(20),o="E"+(e=String(r)," ".repeat(3-e.length).substr(0,3)+e+"M")+String(s);return t>0?"F"+o:"D"+n(o)},e.decode=function(t){if("DaN"===t)return NaN;if("FF"===t)return 1/0;if("DD"===t)return-1/0;var e="D"===t[0],i=(e?n(t):t).slice(2).split("M");return Number((e?"-":"")+i[1]+"e"+String(Number(i[0])-500))}},6653:(t,e)=>{var n={"?":"?@","!":"??",'"':"?%"},i={"?@":"?","??":"!","?%":'"'};e.factory=function(t){return{encode:e,decode:function(e){if("A"===e)return null;if("K!"===e)return[];for(var n,r=e.split('"'),s=[[]],o=0,h=r.length,c=0;c<h;c++){for(var a=r[c],u=a.length,l=0;"K"==a[l];)l++;for(var f=0;"!"==a[u-f-1];)f++;for(var d=a.slice(l,u-f),p=o+l,y=o;y<p;y++)s[y+1]=[],s[y].push(s[y+1]),n=s[o=p];for(0!==d.length&&n.push(t.decode(/\?[%\?@]/.test(g=d)?g.replace(/\?[%\?@]/g,(function(t){return i[t]})):g)),y=p=o-f;y<o;y++)s[y+1]=[],n=s[o=p]}var g;return s[0][0]}};function e(t){if(null===t)return"A";if(!Array.isArray(t))throw new Error("can only encode arrays");var e=t.length;if(0==e)return"K!";for(var n=r(t[0]),i=1;i<e;i++)n+='"'+r(t[i]);return"K"+n+"!"}function r(i){return"object"==typeof i?e(i):(r=t.encode(i),/[!"]/.test(r)?r.replace(/[\?!"]/g,(function(t){return n[t]})):r);var r}}},2493:(t,e,n)=>{var i=n(6580),r=n(6653);e.flip=function(t){var e=t.toString(),n="";for(var i in e)n+="."==e[i]?".":9-+e[i];return n},e.number=i,e.string={encode:function(t){return/\x00|\x01/.test(t)?"J"+t.replace(/\x01/g,"").replace(/\x00/g,""):"J"+t},decode:function(t){if("J"===t[0])return t.substring(1)}},e.encode=function(t){return e[typeof t].encode(t)},e.decode=function(t){if(""===t)return t;if(!s[t[0]])throw new Error("no decoder for:"+JSON.stringify(t));return s[t[0]](t)},e.object=r.factory(e),e.boolean={encode:function(t){return t?"C":"B"},decode:function(t){return"C"===t}},e.undefined={encode:function(t){return"L"},decode:function(){}};var s={A:e.object.decode,B:e.boolean.decode,C:e.boolean.decode,D:e.number.decode,F:e.number.decode,J:e.string.decode,K:e.object.decode,L:e.undefined.decode};e.buffer=!1,e.type="charwise"},5683:t=>{var e,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var r=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(n,i){function r(n){t.removeListener(e,s),i(n)}function s(){"function"==typeof t.removeListener&&t.removeListener("error",r),n([].slice.call(arguments))}y(t,e,s,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&y(t,"error",e,{once:!0})}(t,r)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function h(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function a(t,e,n,i){var r,s,o,a;if(h(n),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),void 0===o)o=s[e]=n,++t._eventsCount;else if("function"==typeof o?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),(r=c(t))>0&&o.length>r&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=o.length,a=u,console&&console.warn&&console.warn(a)}return t}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=u.bind(i);return r.listener=n,i.wrapFn=r,r}function f(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):p(r,r.length)}function d(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function y(t,e,n,i){if("function"==typeof t.on)i.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function r(s){i.once&&t.removeEventListener(e,r),n(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,s=this._events;if(void 0!==s)r=r&&void 0===s.error;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var h=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw h.context=o,h}var c=s[t];if(void 0===c)return!1;if("function"==typeof c)i(c,this,e);else{var a=c.length,u=p(c,a);for(n=0;n<a;++n)i(u[n],this,e)}return!0},s.prototype.addListener=function(t,e){return a(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return a(this,t,e,!0)},s.prototype.once=function(t,e){return h(e),this.on(t,l(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return h(e),this.prependListener(t,l(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,i,r,s,o;if(h(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){o=n[s].listener,r=s;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,o||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,s=Object.keys(n);for(i=0;i<s.length;++i)"removeListener"!==(r=s[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},s.prototype.listeners=function(t){return f(this,t,!0)},s.prototype.rawListeners=function(t){return f(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},s.prototype.listenerCount=d,s.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},7378:(t,e)=>{e.read=function(t,e,n,i,r){var s,o,h=8*r-i-1,c=(1<<h)-1,a=c>>1,u=-7,l=n?r-1:0,f=n?-1:1,d=t[e+l];for(l+=f,s=d&(1<<-u)-1,d>>=-u,u+=h;u>0;s=256*s+t[e+l],l+=f,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=i;u>0;o=256*o+t[e+l],l+=f,u-=8);if(0===s)s=1-a;else{if(s===c)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,i),s-=a}return(d?-1:1)*o*Math.pow(2,s-i)},e.write=function(t,e,n,i,r,s){var o,h,c,a=8*s-r-1,u=(1<<a)-1,l=u>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:s-1,p=i?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(h=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),(e+=o+l>=1?f/c:f*Math.pow(2,1-l))*c>=2&&(o++,c/=2),o+l>=u?(h=0,o=u):o+l>=1?(h=(e*c-1)*Math.pow(2,r),o+=l):(h=e*Math.pow(2,l-1)*Math.pow(2,r),o=0));r>=8;t[n+d]=255&h,d+=p,h/=256,r-=8);for(o=o<<r|h,a+=r;a>0;t[n+d]=255&o,d+=p,o/=256,a-=8);t[n+d-p]|=128*y}},263:(t,e,n)=>{const i=n(7783),r=n(5503),{Encoding:s}=n(6822),{BufferFormat:o,ViewFormat:h,UTF8Format:c}=n(4890),a=Symbol("formats"),u=Symbol("encodings"),l=new Set(["buffer","view","utf8"]);e.Transcoder=class{constructor(t){if(!Array.isArray(t))throw new TypeError("The first argument 'formats' must be an array");if(!t.every((t=>l.has(t))))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'");this[u]=new Map,this[a]=new Set(t);for(const t in r)try{this.encoding(t)}catch(t){if("LEVEL_ENCODING_NOT_SUPPORTED"!==t.code)throw t}}encodings(){return Array.from(new Set(this[u].values()))}encoding(t){let e=this[u].get(t);if(void 0===e){if("string"==typeof t&&""!==t){if(e=d[t],!e)throw new i(`Encoding '${t}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if("object"!=typeof t||null===t)throw new TypeError("First argument 'encoding' must be a string or object");e=function(t){if(t instanceof s)return t;const e="type"in t&&"string"==typeof t.type?t.type:void 0,n=t.name||e||"anonymous-"+p++;switch(function(t){return"format"in t&&void 0!==t.format?t.format:"buffer"in t&&"boolean"==typeof t.buffer?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}(t)){case"view":return new h({...t,name:n});case"utf8":return new c({...t,name:n});case"buffer":return new o({...t,name:n});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}(t)}const{name:n,format:r}=e;if(!this[a].has(r))if(this[a].has("view"))e=e.createViewTranscoder();else if(this[a].has("buffer"))e=e.createBufferTranscoder();else{if(!this[a].has("utf8"))throw new i(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});e=e.createUTF8Transcoder()}for(const i of[t,n,e.name,e.commonName])this[u].set(i,e)}return e}};const f={binary:r.buffer,"utf-8":r.utf8},d={...r,...f};let p=0},6822:(t,e,n)=>{const i=n(7783),r=new Set(["buffer","view","utf8"]);e.Encoding=class{constructor(t){if(this.encode=t.encode||this.encode,this.decode=t.decode||this.decode,this.name=t.name||this.name,this.format=t.format||this.format,"function"!=typeof this.encode)throw new TypeError("The 'encode' property must be a function");if("function"!=typeof this.decode)throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),"string"!=typeof this.name||""===this.name)throw new TypeError("The 'name' property must be a string");if("string"!=typeof this.format||!r.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");t.createViewTranscoder&&(this.createViewTranscoder=t.createViewTranscoder),t.createBufferTranscoder&&(this.createBufferTranscoder=t.createBufferTranscoder),t.createUTF8Transcoder&&(this.createUTF8Transcoder=t.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new i(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new i(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new i(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}}},5503:(t,e,n)=>{const{Buffer:i}=n(2186)||{Buffer:{isBuffer:()=>!1}},{textEncoder:r,textDecoder:s}=n(9208)(),{BufferFormat:o,ViewFormat:h,UTF8Format:c}=n(4890),a=t=>t;e.utf8=new c({encode:function(t){return i.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?s.decode(t):String(t)},decode:a,name:"utf8",createViewTranscoder(){return new h({encode:function(t){return ArrayBuffer.isView(t)?t:r.encode(t)},decode:function(t){return s.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new o({encode:function(t){return i.isBuffer(t)?t:ArrayBuffer.isView(t)?i.from(t.buffer,t.byteOffset,t.byteLength):i.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}}),e.json=new c({encode:JSON.stringify,decode:JSON.parse,name:"json"}),e.buffer=new o({encode:function(t){return i.isBuffer(t)?t:ArrayBuffer.isView(t)?i.from(t.buffer,t.byteOffset,t.byteLength):i.from(String(t),"utf8")},decode:a,name:"buffer",createViewTranscoder(){return new h({encode:function(t){return ArrayBuffer.isView(t)?t:i.from(String(t),"utf8")},decode:function(t){return i.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}}),e.view=new h({encode:function(t){return ArrayBuffer.isView(t)?t:r.encode(t)},decode:a,name:"view",createBufferTranscoder(){return new o({encode:function(t){return i.isBuffer(t)?t:ArrayBuffer.isView(t)?i.from(t.buffer,t.byteOffset,t.byteLength):i.from(String(t),"utf8")},decode:a,name:`${this.name}+buffer`})}}),e.hex=new o({encode:function(t){return i.isBuffer(t)?t:i.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"}),e.base64=new o({encode:function(t){return i.isBuffer(t)?t:i.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"})},4890:(t,e,n)=>{const{Buffer:i}=n(2186)||{},{Encoding:r}=n(6822),s=n(9208);class o extends r{constructor(t){super({...t,format:"buffer"})}createViewTranscoder(){return new h({encode:this.encode,decode:t=>this.decode(i.from(t.buffer,t.byteOffset,t.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}}class h extends r{constructor(t){super({...t,format:"view"})}createBufferTranscoder(){return new o({encode:t=>{const e=this.encode(t);return i.from(e.buffer,e.byteOffset,e.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}}e.BufferFormat=o,e.ViewFormat=h,e.UTF8Format=class extends r{constructor(t){super({...t,format:"utf8"})}createBufferTranscoder(){return new o({encode:t=>i.from(this.encode(t),"utf8"),decode:t=>this.decode(t.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:t,textDecoder:e}=s();return new h({encode:e=>t.encode(this.encode(e)),decode:t=>this.decode(e.decode(t)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}}},9208:t=>{let e=null;t.exports=function(){return null===e&&(e={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),e}},7783:t=>{t.exports=class extends Error{constructor(t,e){super(t||""),"object"==typeof e&&null!==e&&(e.code&&(this.code=String(e.code)),e.expected&&(this.expected=!0),e.transient&&(this.transient=!0),e.cause&&(this.cause=e.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}},6958:(t,e,n)=>{let i;t.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:n.g):t=>(i||(i=Promise.resolve())).then(t).catch((t=>setTimeout((()=>{throw t}),0)))},439:(t,e,n)=>{t.exports=function(t,e,n){if("number"!=typeof e)throw new Error("second argument must be a Number");let r,s,o,h,c,a,u=!0;function l(t){function e(){n&&n(t,r),n=null}u?i(e):e()}function f(e,n,i){if(r[e]=i,n&&(c=!0),0==--o||n)l(n);else if(!c&&a<s){let e;h?(e=h[a],a+=1,t[e]((function(t,n){f(e,t,n)}))):(e=a,a+=1,t[e]((function(t,n){f(e,t,n)})))}}Array.isArray(t)?(r=[],o=s=t.length):(h=Object.keys(t),r={},o=s=h.length),a=e,o?h?h.some((function(n,i){return t[n]((function(t,e){f(n,t,e)})),i===e-1})):t.some((function(t,n){return t((function(t,e){f(n,t,e)})),n===e-1})):l(null),u=!1};const i=n(6958)},6472:t=>{function e(t){return Object.prototype.toString.call(t)}var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function i(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)}var r=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},s=Object.prototype.hasOwnProperty||function(t,e){return e in t};function o(t){if("object"==typeof t&&null!==t){var s;if(n(t))s=[];else if("[object Date]"===e(t))s=new Date(t.getTime?t.getTime():t);else if("[object RegExp]"===e(t))s=new RegExp(t);else if(function(t){return"[object Error]"===e(t)}(t))s={message:t.message};else if(function(t){return"[object Boolean]"===e(t)}(t)||function(t){return"[object Number]"===e(t)}(t)||function(t){return"[object String]"===e(t)}(t))s=Object(t);else if(Object.create&&Object.getPrototypeOf)s=Object.create(Object.getPrototypeOf(t));else if(t.constructor===Object)s={};else{var o=t.constructor&&t.constructor.prototype||t.__proto__||{},h=function(){};h.prototype=o,s=new h}return i(r(t),(function(e){s[e]=t[e]})),s}return t}function h(t,e,h){var c=[],a=[],u=!0;return function t(l){var f=h?o(l):l,d={},p=!0,y={node:f,node_:l,path:[].concat(c),parent:a[a.length-1],parents:a,key:c[c.length-1],isRoot:0===c.length,level:c.length,circular:null,update:function(t,e){y.isRoot||(y.parent.node[y.key]=t),y.node=t,e&&(p=!1)},delete:function(t){delete y.parent.node[y.key],t&&(p=!1)},remove:function(t){n(y.parent.node)?y.parent.node.splice(y.key,1):delete y.parent.node[y.key],t&&(p=!1)},keys:null,before:function(t){d.before=t},after:function(t){d.after=t},pre:function(t){d.pre=t},post:function(t){d.post=t},stop:function(){u=!1},block:function(){p=!1}};if(!u)return y;function g(){if("object"==typeof y.node&&null!==y.node){y.keys&&y.node_===y.node||(y.keys=r(y.node)),y.isLeaf=0===y.keys.length;for(var t=0;t<a.length;t++)if(a[t].node_===l){y.circular=a[t];break}}else y.isLeaf=!0,y.keys=null;y.notLeaf=!y.isLeaf,y.notRoot=!y.isRoot}g();var E=e.call(y,y.node);return void 0!==E&&y.update&&y.update(E),d.before&&d.before.call(y,y.node),p?("object"!=typeof y.node||null===y.node||y.circular||(a.push(y),g(),i(y.keys,(function(e,n){c.push(e),d.pre&&d.pre.call(y,y.node[e],e);var i=t(y.node[e]);h&&s.call(y.node,e)&&(y.node[e]=i.node),i.isLast=n===y.keys.length-1,i.isFirst=0===n,d.post&&d.post.call(y,i),c.pop()})),a.pop()),d.after&&d.after.call(y,y.node),y):y}(t).node}function c(t){this.value=t}function a(t){return new c(t)}c.prototype.get=function(t){for(var e=this.value,n=0;n<t.length;n++){var i=t[n];if(!e||!s.call(e,i))return;e=e[i]}return e},c.prototype.has=function(t){for(var e=this.value,n=0;n<t.length;n++){var i=t[n];if(!e||!s.call(e,i))return!1;e=e[i]}return!0},c.prototype.set=function(t,e){for(var n=this.value,i=0;i<t.length-1;i++){var r=t[i];s.call(n,r)||(n[r]={}),n=n[r]}return n[t[i]]=e,e},c.prototype.map=function(t){return h(this.value,t,!0)},c.prototype.forEach=function(t){return this.value=h(this.value,t,!1),this.value},c.prototype.reduce=function(t,e){var n=1===arguments.length,i=n?this.value:e;return this.forEach((function(e){this.isRoot&&n||(i=t.call(this,i,e))})),i},c.prototype.paths=function(){var t=[];return this.forEach((function(){t.push(this.path)})),t},c.prototype.nodes=function(){var t=[];return this.forEach((function(){t.push(this.node)})),t},c.prototype.clone=function(){var t=[],e=[];return function n(s){for(var h=0;h<t.length;h++)if(t[h]===s)return e[h];if("object"==typeof s&&null!==s){var c=o(s);return t.push(s),e.push(c),i(r(s),(function(t){c[t]=n(s[t])})),t.pop(),e.pop(),c}return s}(this.value)},i(r(c.prototype),(function(t){a[t]=function(e){var n=[].slice.call(arguments,1),i=new c(e);return i[t].apply(i,n)}})),t.exports=a},9464:(t,e,n)=>{const{fromCallback:i}=n(6957),r=n(4473),{getCallback:s,getOptions:o}=n(2520),h=Symbol("promise"),c=Symbol("status"),a=Symbol("operations"),u=Symbol("finishClose"),l=Symbol("closeCallbacks");e.AbstractChainedBatch=class{constructor(t){if("object"!=typeof t||null===t)throw new TypeError("The first argument must be an abstract-level database, received "+(null===t?"null":typeof t));this[a]=[],this[l]=[],this[c]="open",this[u]=this[u].bind(this),this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get length(){return this[a].length}put(t,e,n){if("open"!==this[c])throw new r("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const i=this.db._checkKey(t)||this.db._checkValue(e);if(i)throw i;const s=n&&null!=n.sublevel?n.sublevel:this.db,o=n,h=s.keyEncoding(n&&n.keyEncoding),u=s.valueEncoding(n&&n.valueEncoding),l=h.format;n={...n,keyEncoding:l,valueEncoding:u.format},s!==this.db&&(n.sublevel=null);const f=s.prefixKey(h.encode(t),l),d=u.encode(e);return this._put(f,d,n),this[a].push({...o,type:"put",key:t,value:e}),this}_put(t,e,n){}del(t,e){if("open"!==this[c])throw new r("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const n=this.db._checkKey(t);if(n)throw n;const i=e&&null!=e.sublevel?e.sublevel:this.db,s=e,o=i.keyEncoding(e&&e.keyEncoding),h=o.format;return e={...e,keyEncoding:h},i!==this.db&&(e.sublevel=null),this._del(i.prefixKey(o.encode(t),h),e),this[a].push({...s,type:"del",key:t}),this}_del(t,e){}clear(){if("open"!==this[c])throw new r("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[a]=[],this}_clear(){}write(t,e){return e=s(t,e),e=i(e,h),t=o(t),"open"!==this[c]?this.nextTick(e,new r("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):0===this.length?this.close(e):(this[c]="writing",this._write(t,(t=>{this[c]="closing",this[l].push((()=>e(t))),t||this.db.emit("batch",this[a]),this._close(this[u])}))),e[h]}_write(t,e){}close(t){return t=i(t,h),"closing"===this[c]?this[l].push(t):"closed"===this[c]?this.nextTick(t):(this[l].push(t),"writing"!==this[c]&&(this[c]="closing",this._close(this[u]))),t[h]}_close(t){this.nextTick(t)}[u](){this[c]="closed",this.db.detachResource(this);const t=this[l];this[l]=[];for(const e of t)e()}}},3961:(t,e,n)=>{const{fromCallback:i}=n(6957),r=n(4473),{getOptions:s,getCallback:o}=n(2520),h=Symbol("promise"),c=Symbol("callback"),a=Symbol("working"),u=Symbol("handleOne"),l=Symbol("handleMany"),f=Symbol("autoClose"),d=Symbol("finishWork"),p=Symbol("returnMany"),y=Symbol("closing"),g=Symbol("handleClose"),E=Symbol("closed"),m=Symbol("closeCallbacks"),b=Symbol("keyEncoding"),v=Symbol("valueEncoding"),w=Symbol("abortOnClose"),T=Symbol("legacy"),_=Symbol("keys"),L=Symbol("values"),A=Symbol("limit"),S=Symbol("count"),O=Object.freeze({}),k=()=>{};let x=!1;class I{constructor(t,e,n){if("object"!=typeof t||null===t)throw new TypeError("The first argument must be an abstract-level database, received "+(null===t?"null":typeof t));if("object"!=typeof e||null===e)throw new TypeError("The second argument must be an options object");this[E]=!1,this[m]=[],this[a]=!1,this[y]=!1,this[f]=!1,this[c]=null,this[u]=this[u].bind(this),this[l]=this[l].bind(this),this[g]=this[g].bind(this),this[b]=e[b],this[v]=e[v],this[T]=n,this[A]=Number.isInteger(e.limit)&&e.limit>=0?e.limit:1/0,this[S]=0,this[w]=!!e.abortOnClose,this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get count(){return this[S]}get limit(){return this[A]}next(t){let e;if(void 0===t)e=new Promise(((e,n)=>{t=(t,i,r)=>{t?n(t):this[T]?void 0===i&&void 0===r?e():e([i,r]):e(i)}}));else if("function"!=typeof t)throw new TypeError("Callback must be a function");return this[y]?this.nextTick(t,new r("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[a]?this.nextTick(t,new r("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[a]=!0,this[c]=t,this[S]>=this[A]?this.nextTick(this[u],null):this._next(this[u])),e}_next(t){this.nextTick(t)}nextv(t,e,n){return n=o(e,n),n=i(n,h),e=s(e,O),Number.isInteger(t)?(this[y]?this.nextTick(n,new r("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[a]?this.nextTick(n,new r("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(t<1&&(t=1),this[A]<1/0&&(t=Math.min(t,this[A]-this[S])),this[a]=!0,this[c]=n,t<=0?this.nextTick(this[l],null,[]):this._nextv(t,e,this[l])),n[h]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[h])}_nextv(t,e,n){const i=[],r=(e,s,o)=>e?n(e):(this[T]?void 0===s&&void 0===o:void 0===s)?n(null,i):(i.push(this[T]?[s,o]:s),void(i.length===t?n(null,i):this._next(r)));this._next(r)}all(t,e){return e=o(t,e),e=i(e,h),t=s(t,O),this[y]?this.nextTick(e,new r("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[a]?this.nextTick(e,new r("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[a]=!0,this[c]=e,this[f]=!0,this[S]>=this[A]?this.nextTick(this[l],null,[]):this._all(t,this[l])),e[h]}_all(t,e){let n=this[S];const i=[],r=()=>{const t=this[A]<1/0?Math.min(1e3,this[A]-n):1e3;t<=0?this.nextTick(e,null,i):this._nextv(t,O,s)},s=(t,s)=>{t?e(t):0===s.length?e(null,i):(i.push.apply(i,s),n+=s.length,r())};r()}[d](){const t=this[c];return this[w]&&null===t?k:(this[a]=!1,this[c]=null,this[y]&&this._close(this[g]),t)}[p](t,e,n){this[f]?this.close(t.bind(null,e,n)):t(e,n)}seek(t,e){if(e=s(e,O),this[y]);else{if(this[a])throw new r("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const n=this.db.keyEncoding(e.keyEncoding||this[b]),i=n.format;e.keyEncoding!==i&&(e={...e,keyEncoding:i});const r=this.db.prefixKey(n.encode(t),i);this._seek(r,e)}}}_seek(t,e){throw new r("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(t){return t=i(t,h),this[E]?this.nextTick(t):this[y]?this[m].push(t):(this[y]=!0,this[m].push(t),this[a]?this[w]&&this[d]()(new r("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[g])),t[h]}_close(t){this.nextTick(t)}[g](){this[E]=!0,this.db.detachResource(this);const t=this[m];this[m]=[];for(const e of t)e()}async*[Symbol.asyncIterator](){try{let t;for(;void 0!==(t=await this.next());)yield t}finally{this[E]||await this.close()}}}class B extends I{constructor(t,e){super(t,e,!0),this[_]=!1!==e.keys,this[L]=!1!==e.values}[u](t,e,n){const i=this[d]();if(t)return i(t);try{e=this[_]&&void 0!==e?this[b].decode(e):void 0,n=this[L]&&void 0!==n?this[v].decode(n):void 0}catch(t){return i(new C("entry",t))}void 0===e&&void 0===n||this[S]++,i(null,e,n)}[l](t,e){const n=this[d]();if(t)return this[p](n,t);try{for(const t of e){const e=t[0],n=t[1];t[0]=this[_]&&void 0!==e?this[b].decode(e):void 0,t[1]=this[L]&&void 0!==n?this[v].decode(n):void 0}}catch(t){return this[p](n,new C("entries",t))}this[S]+=e.length,this[p](n,null,e)}end(t){return x||"undefined"==typeof console||(x=!0,console.warn(new r("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(t)}}class C extends r{constructor(t,e){super(`Iterator could not decode ${t}`,{code:"LEVEL_DECODE_ERROR",cause:e})}}for(const t of["_ended property","_nexting property","_end method"])Object.defineProperty(B.prototype,t.split(" ")[0],{get(){throw new r(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new r(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});B.keyEncoding=b,B.valueEncoding=v,e.AbstractIterator=B,e.AbstractKeyIterator=class extends I{constructor(t,e){super(t,e,!1)}[u](t,e){const n=this[d]();if(t)return n(t);try{e=void 0!==e?this[b].decode(e):void 0}catch(t){return n(new C("key",t))}void 0!==e&&this[S]++,n(null,e)}[l](t,e){const n=this[d]();if(t)return this[p](n,t);try{for(let t=0;t<e.length;t++){const n=e[t];e[t]=void 0!==n?this[b].decode(n):void 0}}catch(t){return this[p](n,new C("keys",t))}this[S]+=e.length,this[p](n,null,e)}},e.AbstractValueIterator=class extends I{constructor(t,e){super(t,e,!1)}[u](t,e){const n=this[d]();if(t)return n(t);try{e=void 0!==e?this[v].decode(e):void 0}catch(t){return n(new C("value",t))}void 0!==e&&this[S]++,n(null,e)}[l](t,e){const n=this[d]();if(t)return this[p](n,t);try{for(let t=0;t<e.length;t++){const n=e[t];e[t]=void 0!==n?this[v].decode(n):void 0}}catch(t){return this[p](n,new C("values",t))}this[S]+=e.length,this[p](n,null,e)}}},9071:(t,e,n)=>{const{supports:i}=n(3658),{Transcoder:r}=n(8499),{EventEmitter:s}=n(7187),{fromCallback:o}=n(6957),h=n(4473),{AbstractIterator:c}=n(3961),{DefaultKeyIterator:a,DefaultValueIterator:u}=n(5429),{DeferredIterator:l,DeferredKeyIterator:f,DeferredValueIterator:d}=n(593),{DefaultChainedBatch:p}=n(4765),{getCallback:y,getOptions:g}=n(2520),E=n(56),m=Symbol("promise"),b=Symbol("landed"),v=Symbol("resources"),w=Symbol("closeResources"),T=Symbol("operations"),_=Symbol("undefer"),L=Symbol("deferOpen"),A=Symbol("options"),S=Symbol("status"),O=Symbol("defaultOptions"),k=Symbol("transcoder"),x=Symbol("keyEncoding"),I=Symbol("valueEncoding"),B=()=>{};class C extends s{constructor(t,e){if(super(),"object"!=typeof t||null===t)throw new TypeError("The first argument 'manifest' must be an object");e=g(e);const{keyEncoding:n,valueEncoding:s,passive:o,...h}=e;this[v]=new Set,this[T]=[],this[L]=!0,this[A]=h,this[S]="opening",this.supports=i(t,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:!1!==t.snapshots,permanence:!1!==t.permanence,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:t.encodings||{},events:Object.assign({},t.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[k]=new r(U(this)),this[x]=this[k].encoding(n||"utf8"),this[I]=this[k].encoding(s||"utf8");for(const t of this[k].encodings())this.supports.encodings[t.commonName]||(this.supports.encodings[t.commonName]=!0);this[O]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[x].commonName,valueEncoding:this[I].commonName}),key:Object.freeze({keyEncoding:this[x].commonName})},this.nextTick((()=>{this[L]&&this.open({passive:!1},B)}))}get status(){return this[S]}keyEncoding(t){return this[k].encoding(null!=t?t:this[x])}valueEncoding(t){return this[k].encoding(null!=t?t:this[I])}open(t,e){e=y(t,e),e=o(e,m),(t={...this[A],...g(t)}).createIfMissing=!1!==t.createIfMissing,t.errorIfExists=!!t.errorIfExists;const n=t=>{"closing"===this[S]||"opening"===this[S]?this.once(b,t?()=>n(t):n):"open"!==this[S]?e(new h("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:t})):e()};return t.passive?"opening"===this[S]?this.once(b,n):this.nextTick(n):"closed"===this[S]||this[L]?(this[L]=!1,this[S]="opening",this.emit("opening"),this._open(t,(t=>{if(t)return this[S]="closed",this[w]((()=>{this.emit(b),n(t)})),void this[_]();this[S]="open",this[_](),this.emit(b),"open"===this[S]&&this.emit("open"),"open"===this[S]&&this.emit("ready"),n()}))):"open"===this[S]?this.nextTick(n):this.once(b,(()=>this.open(t,e))),e[m]}_open(t,e){this.nextTick(e)}close(t){t=o(t,m);const e=n=>{"opening"===this[S]||"closing"===this[S]?this.once(b,n?e(n):e):"closed"!==this[S]?t(new h("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):t()};if("open"===this[S]){this[S]="closing",this.emit("closing");const t=t=>{this[S]="open",this[_](),this.emit(b),e(t)};this[w]((()=>{this._close((n=>{if(n)return t(n);this[S]="closed",this[_](),this.emit(b),"closed"===this[S]&&this.emit("closed"),e()}))}))}else"closed"===this[S]?this.nextTick(e):this.once(b,(()=>this.close(t)));return t[m]}[w](t){if(0===this[v].size)return this.nextTick(t);let e=this[v].size,n=!0;const i=()=>{0==--e&&(n?this.nextTick(t):t())};for(const t of this[v])t.close(i);n=!1,this[v].clear()}_close(t){this.nextTick(t)}get(t,e,n){if(n=y(e,n),n=o(n,m),e=g(e,this[O].entry),"opening"===this[S])return this.defer((()=>this.get(t,e,n))),n[m];if(N(this,n))return n[m];const i=this._checkKey(t);if(i)return this.nextTick(n,i),n[m];const r=this.keyEncoding(e.keyEncoding),s=this.valueEncoding(e.valueEncoding),c=r.format,a=s.format;return e.keyEncoding===c&&e.valueEncoding===a||(e=Object.assign({},e,{keyEncoding:c,valueEncoding:a})),this._get(this.prefixKey(r.encode(t),c),e,((t,e)=>{if(t)return("LEVEL_NOT_FOUND"===t.code||t.notFound||/NotFound/i.test(t))&&(t.code||(t.code="LEVEL_NOT_FOUND"),t.notFound||(t.notFound=!0),t.status||(t.status=404)),n(t);try{e=s.decode(e)}catch(t){return n(new h("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:t}))}n(null,e)})),n[m]}_get(t,e,n){this.nextTick(n,new Error("NotFound"))}getMany(t,e,n){if(n=y(e,n),n=o(n,m),e=g(e,this[O].entry),"opening"===this[S])return this.defer((()=>this.getMany(t,e,n))),n[m];if(N(this,n))return n[m];if(!Array.isArray(t))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[m];if(0===t.length)return this.nextTick(n,null,[]),n[m];const i=this.keyEncoding(e.keyEncoding),r=this.valueEncoding(e.valueEncoding),s=i.format,c=r.format;e.keyEncoding===s&&e.valueEncoding===c||(e=Object.assign({},e,{keyEncoding:s,valueEncoding:c}));const a=new Array(t.length);for(let e=0;e<t.length;e++){const r=t[e],o=this._checkKey(r);if(o)return this.nextTick(n,o),n[m];a[e]=this.prefixKey(i.encode(r),s)}return this._getMany(a,e,((t,e)=>{if(t)return n(t);try{for(let t=0;t<e.length;t++)void 0!==e[t]&&(e[t]=r.decode(e[t]))}catch(t){return n(new h(`Could not decode one or more of ${e.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:t}))}n(null,e)})),n[m]}_getMany(t,e,n){this.nextTick(n,null,new Array(t.length).fill(void 0))}put(t,e,n,i){if(i=y(n,i),i=o(i,m),n=g(n,this[O].entry),"opening"===this[S])return this.defer((()=>this.put(t,e,n,i))),i[m];if(N(this,i))return i[m];const r=this._checkKey(t)||this._checkValue(e);if(r)return this.nextTick(i,r),i[m];const s=this.keyEncoding(n.keyEncoding),h=this.valueEncoding(n.valueEncoding),c=s.format,a=h.format;n.keyEncoding===c&&n.valueEncoding===a||(n=Object.assign({},n,{keyEncoding:c,valueEncoding:a}));const u=this.prefixKey(s.encode(t),c),l=h.encode(e);return this._put(u,l,n,(n=>{if(n)return i(n);this.emit("put",t,e),i()})),i[m]}_put(t,e,n,i){this.nextTick(i)}del(t,e,n){if(n=y(e,n),n=o(n,m),e=g(e,this[O].key),"opening"===this[S])return this.defer((()=>this.del(t,e,n))),n[m];if(N(this,n))return n[m];const i=this._checkKey(t);if(i)return this.nextTick(n,i),n[m];const r=this.keyEncoding(e.keyEncoding),s=r.format;return e.keyEncoding!==s&&(e=Object.assign({},e,{keyEncoding:s})),this._del(this.prefixKey(r.encode(t),s),e,(e=>{if(e)return n(e);this.emit("del",t),n()})),n[m]}_del(t,e,n){this.nextTick(n)}batch(t,e,n){if(!arguments.length){if("opening"===this[S])return new p(this);if("open"!==this[S])throw new h("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(n="function"==typeof t?t:y(e,n),n=o(n,m),e=g(e,this[O].empty),"opening"===this[S])return this.defer((()=>this.batch(t,e,n))),n[m];if(N(this,n))return n[m];if(!Array.isArray(t))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[m];if(0===t.length)return this.nextTick(n),n[m];const i=new Array(t.length),{keyEncoding:r,valueEncoding:s,...c}=e;for(let e=0;e<t.length;e++){if("object"!=typeof t[e]||null===t[e])return this.nextTick(n,new TypeError("A batch operation must be an object")),n[m];const o=Object.assign({},t[e]);if("put"!==o.type&&"del"!==o.type)return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[m];const h=this._checkKey(o.key);if(h)return this.nextTick(n,h),n[m];const c=null!=o.sublevel?o.sublevel:this,a=c.keyEncoding(o.keyEncoding||r),u=a.format;if(o.key=c.prefixKey(a.encode(o.key),u),o.keyEncoding=u,"put"===o.type){const t=this._checkValue(o.value);if(t)return this.nextTick(n,t),n[m];const e=c.valueEncoding(o.valueEncoding||s);o.value=e.encode(o.value),o.valueEncoding=e.format}c!==this&&(o.sublevel=null),i[e]=o}return this._batch(i,c,(e=>{if(e)return n(e);this.emit("batch",t),n()})),n[m]}_batch(t,e,n){this.nextTick(n)}sublevel(t,e){return this._sublevel(t,R.defaults(e))}_sublevel(t,e){return new R(this,t,e)}prefixKey(t,e){return t}clear(t,e){if(e=y(t,e),e=o(e,m),t=g(t,this[O].empty),"opening"===this[S])return this.defer((()=>this.clear(t,e))),e[m];if(N(this,e))return e[m];const n=t,i=this.keyEncoding(t.keyEncoding);return(t=E(t,i)).keyEncoding=i.format,0===t.limit?this.nextTick(e):this._clear(t,(t=>{if(t)return e(t);this.emit("clear",n),e()})),e[m]}_clear(t,e){this.nextTick(e)}iterator(t){const e=this.keyEncoding(t&&t.keyEncoding),n=this.valueEncoding(t&&t.valueEncoding);if((t=E(t,e)).keys=!1!==t.keys,t.values=!1!==t.values,t[c.keyEncoding]=e,t[c.valueEncoding]=n,t.keyEncoding=e.format,t.valueEncoding=n.format,"opening"===this[S])return new l(this,t);if("open"!==this[S])throw new h("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(t)}_iterator(t){return new c(this,t)}keys(t){const e=this.keyEncoding(t&&t.keyEncoding),n=this.valueEncoding(t&&t.valueEncoding);if((t=E(t,e))[c.keyEncoding]=e,t[c.valueEncoding]=n,t.keyEncoding=e.format,t.valueEncoding=n.format,"opening"===this[S])return new f(this,t);if("open"!==this[S])throw new h("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(t)}_keys(t){return new a(this,t)}values(t){const e=this.keyEncoding(t&&t.keyEncoding),n=this.valueEncoding(t&&t.valueEncoding);if((t=E(t,e))[c.keyEncoding]=e,t[c.valueEncoding]=n,t.keyEncoding=e.format,t.valueEncoding=n.format,"opening"===this[S])return new d(this,t);if("open"!==this[S])throw new h("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(t)}_values(t){return new u(this,t)}defer(t){if("function"!=typeof t)throw new TypeError("The first argument must be a function");this[T].push(t)}[_](){if(0===this[T].length)return;const t=this[T];this[T]=[];for(const e of t)e()}attachResource(t){if("object"!=typeof t||null===t||"function"!=typeof t.close)throw new TypeError("The first argument must be a resource object");this[v].add(t)}detachResource(t){this[v].delete(t)}_chainedBatch(){return new p(this)}_checkKey(t){if(null==t)return new h("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(t){if(null==t)return new h("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}}C.prototype.nextTick=n(6909);const{AbstractSublevel:R}=n(9650)({AbstractLevel:C});e.AbstractLevel=C,e.AbstractSublevel=R;const N=function(t,e){return"open"!==t[S]&&(t.nextTick(e,new h("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0)},U=function(t){return Object.keys(t.supports.encodings).filter((e=>!!t.supports.encodings[e]))}},875:(t,e,n)=>{e.AbstractLevel=n(9071).AbstractLevel,e.AbstractSublevel=n(9071).AbstractSublevel,e.AbstractIterator=n(3961).AbstractIterator,e.AbstractKeyIterator=n(3961).AbstractKeyIterator,e.AbstractValueIterator=n(3961).AbstractValueIterator,e.AbstractChainedBatch=n(9464).AbstractChainedBatch},2970:(t,e,n)=>{const{AbstractIterator:i,AbstractKeyIterator:r,AbstractValueIterator:s}=n(3961),o=Symbol("unfix"),h=Symbol("iterator"),c=Symbol("handleOne"),a=Symbol("handleMany"),u=Symbol("callback");class l extends i{constructor(t,e,n,i){super(t,e),this[h]=n,this[o]=i,this[c]=this[c].bind(this),this[a]=this[a].bind(this),this[u]=null}[c](t,e,n){const i=this[u];if(t)return i(t);void 0!==e&&(e=this[o](e)),i(t,e,n)}[a](t,e){const n=this[u];if(t)return n(t);for(const t of e){const e=t[0];void 0!==e&&(t[0]=this[o](e))}n(t,e)}}class f extends r{constructor(t,e,n,i){super(t,e),this[h]=n,this[o]=i,this[c]=this[c].bind(this),this[a]=this[a].bind(this),this[u]=null}[c](t,e){const n=this[u];if(t)return n(t);void 0!==e&&(e=this[o](e)),n(t,e)}[a](t,e){const n=this[u];if(t)return n(t);for(let t=0;t<e.length;t++){const n=e[t];void 0!==n&&(e[t]=this[o](n))}n(t,e)}}class d extends s{constructor(t,e,n){super(t,e),this[h]=n}}for(const t of[l,f])t.prototype._next=function(t){this[u]=t,this[h].next(this[c])},t.prototype._nextv=function(t,e,n){this[u]=n,this[h].nextv(t,e,this[a])},t.prototype._all=function(t,e){this[u]=e,this[h].all(t,this[a])};for(const t of[d])t.prototype._next=function(t){this[h].next(t)},t.prototype._nextv=function(t,e,n){this[h].nextv(t,e,n)},t.prototype._all=function(t,e){this[h].all(t,e)};for(const t of[l,f,d])t.prototype._seek=function(t,e){this[h].seek(t,e)},t.prototype._close=function(t){this[h].close(t)};e.AbstractSublevelIterator=l,e.AbstractSublevelKeyIterator=f,e.AbstractSublevelValueIterator=d},9650:(t,e,n)=>{const i=n(4473),{Buffer:r}=n(8764)||{},{AbstractSublevelIterator:s,AbstractSublevelKeyIterator:o,AbstractSublevelValueIterator:h}=n(2970),c=Symbol("prefix"),a=Symbol("upperBound"),u=Symbol("prefixRange"),l=Symbol("parent"),f=Symbol("unfix"),d=new TextEncoder,p={separator:"!"};t.exports=function({AbstractLevel:t}){class e extends t{static defaults(t){if("string"==typeof t)throw new i("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(t&&t.open)throw new i("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return null==t?p:t.separator?t:{...t,separator:"!"}}constructor(t,n,r){const{separator:s,manifest:o,...h}=e.defaults(r);n=b(n,s);const u=s.charCodeAt(0)+1,p=t[l]||t;if(!d.encode(n).every((t=>t>u&&t<127)))throw new i(`Prefix must use bytes > ${u} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(y(p,o),h);const g=(t.prefix||"")+s+n+s,v=g.slice(0,-1)+String.fromCharCode(u);this[l]=p,this[c]=new E(g),this[a]=new E(v),this[f]=new m,this.nextTick=p.nextTick}prefixKey(t,e){if("utf8"===e)return this[c].utf8+t;if(0===t.byteLength)return this[c][e];if("view"===e){const e=this[c].view,n=new Uint8Array(e.byteLength+t.byteLength);return n.set(e,0),n.set(t,e.byteLength),n}{const e=this[c].buffer;return r.concat([e,t],e.byteLength+t.byteLength)}}[u](t,e){void 0!==t.gte?t.gte=this.prefixKey(t.gte,e):void 0!==t.gt?t.gt=this.prefixKey(t.gt,e):t.gte=this[c][e],void 0!==t.lte?t.lte=this.prefixKey(t.lte,e):void 0!==t.lt?t.lt=this.prefixKey(t.lt,e):t.lte=this[a][e]}get prefix(){return this[c].utf8}get db(){return this[l]}_open(t,e){this[l].open({passive:!0},e)}_put(t,e,n,i){this[l].put(t,e,n,i)}_get(t,e,n){this[l].get(t,e,n)}_getMany(t,e,n){this[l].getMany(t,e,n)}_del(t,e,n){this[l].del(t,e,n)}_batch(t,e,n){this[l].batch(t,e,n)}_clear(t,e){this[u](t,t.keyEncoding),this[l].clear(t,e)}_iterator(t){this[u](t,t.keyEncoding);const e=this[l].iterator(t),n=this[f].get(this[c].utf8.length,t.keyEncoding);return new s(this,t,e,n)}_keys(t){this[u](t,t.keyEncoding);const e=this[l].keys(t),n=this[f].get(this[c].utf8.length,t.keyEncoding);return new o(this,t,e,n)}_values(t){this[u](t,t.keyEncoding);const e=this[l].values(t);return new h(this,t,e)}}return{AbstractSublevel:e}};const y=function(t,e){return{...t.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:g(t,"utf8"),buffer:g(t,"buffer"),view:g(t,"view")}}},g=function(t,e){return!!t.supports.encodings[e]&&t.keyEncoding(e).name===e};class E{constructor(t){this.utf8=t,this.view=d.encode(t),this.buffer=r?r.from(this.view.buffer,0,this.view.byteLength):{}}}class m{constructor(){this.cache=new Map}get(t,e){let n=this.cache.get(e);return void 0===n&&(n="view"===e?function(t,e){return e.subarray(t)}.bind(null,t):function(t,e){return e.slice(t)}.bind(null,t),this.cache.set(e,n)),n}}const b=function(t,e){let n=0,i=t.length;for(;n<i&&t[n]===e;)n++;for(;i>n&&t[i-1]===e;)i--;return t.slice(n,i)}},2520:(t,e)=>{e.getCallback=function(t,e){return"function"==typeof t?t:e},e.getOptions=function(t,e){return"object"==typeof t&&null!==t?t:void 0!==e?e:{}}},4765:(t,e,n)=>{const{AbstractChainedBatch:i}=n(9464),r=n(4473),s=Symbol("encoded");e.DefaultChainedBatch=class extends i{constructor(t){super(t),this[s]=[]}_put(t,e,n){this[s].push({...n,type:"put",key:t,value:e})}_del(t,e){this[s].push({...e,type:"del",key:t})}_clear(){this[s]=[]}_write(t,e){"opening"===this.db.status?this.db.defer((()=>this._write(t,e))):"open"===this.db.status?0===this[s].length?this.nextTick(e):this.db._batch(this[s],t,e):this.nextTick(e,new r("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}}},5429:(t,e,n)=>{const{AbstractKeyIterator:i,AbstractValueIterator:r}=n(3961),s=Symbol("iterator"),o=Symbol("callback"),h=Symbol("handleOne"),c=Symbol("handleMany");class a extends i{constructor(t,e){super(t,e),this[s]=t.iterator({...e,keys:!0,values:!1}),this[h]=this[h].bind(this),this[c]=this[c].bind(this)}}class u extends r{constructor(t,e){super(t,e),this[s]=t.iterator({...e,keys:!1,values:!0}),this[h]=this[h].bind(this),this[c]=this[c].bind(this)}}for(const t of[a,u]){const e=t===a,n=e?t=>t[0]:t=>t[1];t.prototype._next=function(t){this[o]=t,this[s].next(this[h])},t.prototype[h]=function(t,n,i){const r=this[o];t?r(t):r(null,e?n:i)},t.prototype._nextv=function(t,e,n){this[o]=n,this[s].nextv(t,e,this[c])},t.prototype._all=function(t,e){this[o]=e,this[s].all(t,this[c])},t.prototype[c]=function(t,e){const i=this[o];t?i(t):i(null,e.map(n))},t.prototype._seek=function(t,e){this[s].seek(t,e)},t.prototype._close=function(t){this[s].close(t)}}e.DefaultKeyIterator=a,e.DefaultValueIterator=u},593:(t,e,n)=>{const{AbstractIterator:i,AbstractKeyIterator:r,AbstractValueIterator:s}=n(3961),o=n(4473),h=Symbol("nut"),c=Symbol("undefer"),a=Symbol("factory");class u extends i{constructor(t,e){super(t,e),this[h]=null,this[a]=()=>t.iterator(e),this.db.defer((()=>this[c]()))}}class l extends r{constructor(t,e){super(t,e),this[h]=null,this[a]=()=>t.keys(e),this.db.defer((()=>this[c]()))}}class f extends s{constructor(t,e){super(t,e),this[h]=null,this[a]=()=>t.values(e),this.db.defer((()=>this[c]()))}}for(const t of[u,l,f])t.prototype[c]=function(){"open"===this.db.status&&(this[h]=this[a]())},t.prototype._next=function(t){null!==this[h]?this[h].next(t):"opening"===this.db.status?this.db.defer((()=>this._next(t))):this.nextTick(t,new o("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(t,e,n){null!==this[h]?this[h].nextv(t,e,n):"opening"===this.db.status?this.db.defer((()=>this._nextv(t,e,n))):this.nextTick(n,new o("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(t,e){null!==this[h]?this[h].all(e):"opening"===this.db.status?this.db.defer((()=>this._all(t,e))):this.nextTick(e,new o("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(t,e){null!==this[h]?this[h]._seek(t,e):"opening"===this.db.status&&this.db.defer((()=>this._seek(t,e)))},t.prototype._close=function(t){null!==this[h]?this[h].close(t):"opening"===this.db.status?this.db.defer((()=>this._close(t))):this.nextTick(t)};e.DeferredIterator=u,e.DeferredKeyIterator=l,e.DeferredValueIterator=f},6909:(t,e,n)=>{const i=n(4375);t.exports=function(t,...e){0===e.length?i(t):i((()=>t(...e)))}},56:(t,e,n)=>{const i=n(4473),r=Object.prototype.hasOwnProperty,s=new Set(["lt","lte","gt","gte"]);t.exports=function(t,e){const n={};for(const o in t)if(r.call(t,o)&&"keyEncoding"!==o&&"valueEncoding"!==o){if("start"===o||"end"===o)throw new i(`The legacy range option '${o}' has been removed`,{code:"LEVEL_LEGACY"});if("encoding"===o)throw new i("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});s.has(o)?n[o]=e.encode(t[o]):n[o]=t[o]}return n.reverse=!!n.reverse,n.limit=Number.isInteger(n.limit)&&n.limit>=0?n.limit:-1,n}},3658:(t,e)=>{e.supports=function(...t){const e=t.reduce(((t,e)=>Object.assign(t,e)),{});return Object.assign(e,{snapshots:e.snapshots||!1,permanence:e.permanence||!1,seek:e.seek||!1,clear:e.clear||!1,getMany:e.getMany||!1,keyIterator:e.keyIterator||!1,valueIterator:e.valueIterator||!1,iteratorNextv:e.iteratorNextv||!1,iteratorAll:e.iteratorAll||!1,status:e.status||!1,createIfMissing:e.createIfMissing||!1,errorIfExists:e.errorIfExists||!1,deferredOpen:e.deferredOpen||!1,promises:e.promises||!1,streams:e.streams||!1,encodings:Object.assign({},e.encodings),events:Object.assign({},e.events),additionalMethods:Object.assign({},e.additionalMethods)})}},9742:(t,e)=>{e.byteLength=function(t){var e=h(t),n=e[0],i=e[1];return 3*(n+i)/4-i},e.toByteArray=function(t){var e,n,s=h(t),o=s[0],c=s[1],a=new r(function(t,e,n){return 3*(e+n)/4-n}(0,o,c)),u=0,l=c>0?o-4:o;for(n=0;n<l;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;return 2===c&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,a[u++]=255&e),1===c&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e),a},e.fromByteArray=function(t){for(var e,i=t.length,r=i%3,s=[],o=16383,h=0,a=i-r;h<a;h+=o)s.push(c(t,h,h+o>a?a:h+o));return 1===r?(e=t[i-1],s.push(n[e>>2]+n[e<<4&63]+"==")):2===r&&(e=(t[i-2]<<8)+t[i-1],s.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),s.join("")};for(var n=[],i=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)n[o]=s[o],i[s.charCodeAt(o)]=o;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,i){for(var r,s,o=[],h=e;h<i;h+=3)r=(t[h]<<16&16711680)+(t[h+1]<<8&65280)+(255&t[h+2]),o.push(n[(s=r)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},1708:(t,e,n)=>{const{AbstractLevel:i}=n(875),r=n(4473),s=n(9967),{fromCallback:o}=n(6957),{Iterator:h}=n(8212),c=n(9687),a=n(9968),u=n(1217),l="level-js-",f=Symbol("idb"),d=Symbol("namePrefix"),p=Symbol("location"),y=Symbol("version"),g=Symbol("store"),E=Symbol("onComplete"),m=Symbol("promise");class b extends i{constructor(t,e,n){if("function"==typeof e||"function"==typeof n)throw new r("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:i,version:s,...o}=e||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},o),"string"!=typeof t)throw new Error("constructor requires a location string argument");this[p]=t,this[d]=null==i?l:i,this[y]=parseInt(s||1,10),this[f]=null}get location(){return this[p]}get namePrefix(){return this[d]}get version(){return this[y]}get db(){return this[f]}get type(){return"browser-level"}_open(t,e){const n=indexedDB.open(this[d]+this[p],this[y]);n.onerror=function(){e(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[f]=n.result,e()},n.onupgradeneeded=t=>{const e=t.target.result;e.objectStoreNames.contains(this[p])||e.createObjectStore(this[p])}}[g](t){return this[f].transaction([this[p]],t).objectStore(this[p])}[E](t,e){const n=t.transaction;n.onabort=function(){e(n.error||new Error("aborted by user"))},n.oncomplete=function(){e(null,t.result)}}_get(t,e,n){const i=this[g]("readonly");let s;try{s=i.get(t)}catch(t){return this.nextTick(n,t)}this[E](s,(function(t,e){return t?n(t):void 0===e?n(new r("Entry not found",{code:"LEVEL_NOT_FOUND"})):void n(null,c(e))}))}_getMany(t,e,n){const i=this[g]("readonly"),r=t.map((t=>e=>{let n;try{n=i.get(t)}catch(t){return e(t)}n.onsuccess=()=>{const t=n.result;e(null,void 0===t?t:c(t))},n.onerror=t=>{t.stopPropagation(),e(n.error)}}));s(r,16,n)}_del(t,e,n){const i=this[g]("readwrite");let r;try{r=i.delete(t)}catch(t){return this.nextTick(n,t)}this[E](r,n)}_put(t,e,n,i){const r=this[g]("readwrite");let s;try{s=r.put(e,t)}catch(t){return this.nextTick(i,t)}this[E](s,i)}_iterator(t){return new h(this,this[p],t)}_batch(t,e,n){const i=this[g]("readwrite"),r=i.transaction;let s,o=0;r.onabort=function(){n(s||r.error||new Error("aborted by user"))},r.oncomplete=function(){n()},function e(){const n=t[o++],h=n.key;let c;try{c="del"===n.type?i.delete(h):i.put(n.value,h)}catch(t){return s=t,void r.abort()}o<t.length?c.onsuccess=e:"function"==typeof r.commit&&r.commit()}()}_clear(t,e){let n,i;try{n=u(t)}catch(t){return this.nextTick(e)}if(t.limit>=0)return a(this,this[p],n,t,e);try{const t=this[g]("readwrite");i=n?t.delete(n):t.clear()}catch(t){return this.nextTick(e,t)}this[E](i,e)}_close(t){this[f].close(),this.nextTick(t)}}b.destroy=function(t,e,n){"function"==typeof e&&(n=e,e=l),n=o(n,m);const i=indexedDB.deleteDatabase(e+t);return i.onsuccess=function(){n()},i.onerror=function(t){n(t)},n[m]},e.v=b},8212:(t,e,n)=>{const{AbstractIterator:i}=n(875),r=n(1217),s=n(9687),o=Symbol("cache"),h=Symbol("finished"),c=Symbol("options"),a=Symbol("currentOptions"),u=Symbol("position"),l=Symbol("location"),f=Symbol("first"),d={};function p(t){"function"==typeof t.commit&&t.commit()}e.Iterator=class extends i{constructor(t,e,n){super(t,n),this[o]=[],this[h]=0===this.limit,this[c]=n,this[a]={...n},this[u]=void 0,this[l]=e,this[f]=!0}_nextv(t,e,n){if(this[f]=!1,this[h])return this.nextTick(n,null,[]);if(this[o].length>0)return t=Math.min(t,this[o].length),this.nextTick(n,null,this[o].splice(0,t));let i;void 0!==this[u]&&(this[c].reverse?(this[a].lt=this[u],this[a].lte=void 0):(this[a].gt=this[u],this[a].gte=void 0));try{i=r(this[a])}catch(t){return this[h]=!0,this.nextTick(n,null,[])}const d=this.db.db.transaction([this[l]],"readonly"),y=d.objectStore(this[l]),g=[];if(this[c].reverse)y[!this[c].values&&y.openKeyCursor?"openKeyCursor":"openCursor"](i,"prev").onsuccess=e=>{const n=e.target.result;if(n){const{key:e,value:i}=n;this[u]=e,g.push([this[c].keys&&void 0!==e?s(e):void 0,this[c].values&&void 0!==i?s(i):void 0]),g.length<t?n.continue():p(d)}else this[h]=!0};else{let e,n;const r=()=>{if(void 0===e||void 0===n)return;const i=Math.max(e.length,n.length);0===i||t===1/0?this[h]=!0:this[u]=e[i-1],g.length=i;for(let t=0;t<i;t++){const i=e[t],r=n[t];g[t]=[this[c].keys&&void 0!==i?s(i):void 0,this[c].values&&void 0!==r?s(r):void 0]}p(d)};this[c].keys||t<1/0?y.getAllKeys(i,t<1/0?t:void 0).onsuccess=t=>{e=t.target.result,r()}:(e=[],this.nextTick(r)),this[c].values?y.getAll(i,t<1/0?t:void 0).onsuccess=t=>{n=t.target.result,r()}:(n=[],this.nextTick(r))}d.onabort=()=>{n(d.error||new Error("aborted by user")),n=null},d.oncomplete=()=>{n(null,g),n=null}}_next(t){if(this[o].length>0){const[e,n]=this[o].shift();this.nextTick(t,null,e,n)}else if(this[h])this.nextTick(t);else{let e=Math.min(100,this.limit-this.count);this[f]&&(this[f]=!1,e=1),this._nextv(e,d,((e,n)=>{if(e)return t(e);this[o]=n,this._next(t)}))}}_all(t,e){this[f]=!1;const n=this[o].splice(0,this[o].length),i=this.limit-this.count-n.length;if(i<=0)return this.nextTick(e,null,n);this._nextv(i,d,((t,i)=>{if(t)return e(t);n.length>0&&(i=n.concat(i)),e(null,i)}))}_seek(t,e){let n;this[f]=!0,this[o]=[],this[h]=!1,this[u]=void 0,this[a]={...this[c]};try{n=r(this[c])}catch(t){return void(this[h]=!0)}null===n||n.includes(t)?this[c].reverse?this[a].lte=t:this[a].gte=t:this[h]=!0}}},9968:t=>{t.exports=function(t,e,n,i,r){if(0===i.limit)return t.nextTick(r);const s=t.db.transaction([e],"readwrite"),o=s.objectStore(e);let h=0;s.oncomplete=function(){r()},s.onabort=function(){r(s.error||new Error("aborted by user"))};const c=o.openKeyCursor?"openKeyCursor":"openCursor",a=i.reverse?"prev":"next";o[c](n,a).onsuccess=function(t){const e=t.target.result;e&&(o.delete(e.key).onsuccess=function(){(i.limit<=0||++h<i.limit)&&e.continue()})}}},9687:t=>{const e=new TextEncoder;t.exports=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):e.encode(t)}},1217:t=>{t.exports=function(t){const e=void 0!==t.gte?t.gte:void 0!==t.gt?t.gt:void 0,n=void 0!==t.lte?t.lte:void 0!==t.lt?t.lt:void 0,i=void 0===t.gte,r=void 0===t.lte;return void 0!==e&&void 0!==n?IDBKeyRange.bound(e,n,i,r):void 0!==e?IDBKeyRange.lowerBound(e,i):void 0!==n?IDBKeyRange.upperBound(n,r):null}},8764:(t,e,n)=>{const i=n(9742),r=n(645),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},e.INSPECT_MAX_BYTES=50;const o=2147483647;function h(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,c.prototype),e}function c(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}return a(t,e,n)}function a(t,e,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|y(t,e);let i=h(n);const r=i.write(t,e);return r!==n&&(i=i.slice(0,r)),i}(t,e);if(ArrayBuffer.isView(t))return function(t){if(X(t,Uint8Array)){const e=new Uint8Array(t);return d(e.buffer,e.byteOffset,e.byteLength)}return f(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(X(t,ArrayBuffer)||t&&X(t.buffer,ArrayBuffer))return d(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(X(t,SharedArrayBuffer)||t&&X(t.buffer,SharedArrayBuffer)))return d(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return c.from(i,e,n);const r=function(t){if(c.isBuffer(t)){const e=0|p(t.length),n=h(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||J(t.length)?h(0):f(t):"Buffer"===t.type&&Array.isArray(t.data)?f(t.data):void 0}(t);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return u(t),h(t<0?0:0|p(t))}function f(t){const e=t.length<0?0:0|p(t.length),n=h(e);for(let i=0;i<e;i+=1)n[i]=255&t[i];return n}function d(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(i,c.prototype),i}function p(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function y(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||X(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;let r=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(t).length;default:if(r)return i?-1:W(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){let i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,n);case"utf8":case"utf-8":return S(this,e,n);case"ascii":return k(this,e,n);case"latin1":case"binary":return x(this,e,n);case"base64":return A(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function E(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function m(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),J(n=+n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=c.from(e,i)),c.isBuffer(e))return 0===e.length?-1:b(t,e,n,i,r);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,i,r){let s,o=1,h=t.length,c=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;o=2,h/=2,c/=2,n/=2}function a(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(r){let i=-1;for(s=n;s<h;s++)if(a(t,s)===a(e,-1===i?0:s-i)){if(-1===i&&(i=s),s-i+1===c)return i*o}else-1!==i&&(s-=s-i),i=-1}else for(n+c>h&&(n=h-c),s=n;s>=0;s--){let n=!0;for(let i=0;i<c;i++)if(a(t,s+i)!==a(e,i)){n=!1;break}if(n)return s}return-1}function v(t,e,n,i){n=Number(n)||0;const r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;const s=e.length;let o;for(i>s/2&&(i=s/2),o=0;o<i;++o){const i=parseInt(e.substr(2*o,2),16);if(J(i))return o;t[n+o]=i}return o}function w(t,e,n,i){return H(W(e,t.length-n),t,n,i)}function T(t,e,n,i){return H(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function _(t,e,n,i){return H(Y(e),t,n,i)}function L(t,e,n,i){return H(function(t,e){let n,i,r;const s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),i=n>>8,r=n%256,s.push(r),s.push(i);return s}(e,t.length-n),t,n,i)}function A(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function S(t,e,n){n=Math.min(t.length,n);const i=[];let r=e;for(;r<n;){const e=t[r];let s=null,o=e>239?4:e>223?3:e>191?2:1;if(r+o<=n){let n,i,h,c;switch(o){case 1:e<128&&(s=e);break;case 2:n=t[r+1],128==(192&n)&&(c=(31&e)<<6|63&n,c>127&&(s=c));break;case 3:n=t[r+1],i=t[r+2],128==(192&n)&&128==(192&i)&&(c=(15&e)<<12|(63&n)<<6|63&i,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:n=t[r+1],i=t[r+2],h=t[r+3],128==(192&n)&&128==(192&i)&&128==(192&h)&&(c=(15&e)<<18|(63&n)<<12|(63&i)<<6|63&h,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s),r+=o}return function(t){const e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);let n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=O));return n}(i)}e.kMaxLength=o,c.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(t,e,n){return a(t,e,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(t,e,n){return function(t,e,n){return u(t),t<=0?h(t):void 0!==e?"string"==typeof n?h(t).fill(e,n):h(t).fill(e):h(t)}(t,e,n)},c.allocUnsafe=function(t){return l(t)},c.allocUnsafeSlow=function(t){return l(t)},c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(X(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),X(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,i=e.length;for(let r=0,s=Math.min(n,i);r<s;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const i=c.allocUnsafe(e);let r=0;for(n=0;n<t.length;++n){let e=t[n];if(X(e,Uint8Array))r+e.length>i.length?(c.isBuffer(e)||(e=c.from(e)),e.copy(i,r)):Uint8Array.prototype.set.call(i,e,r);else{if(!c.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(i,r)}r+=e.length}return i},c.byteLength=y,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)E(this,e,e+1);return this},c.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)E(this,e,e+3),E(this,e+1,e+2);return this},c.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)E(this,e,e+7),E(this,e+1,e+6),E(this,e+2,e+5),E(this,e+3,e+4);return this},c.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?S(this,0,t):g.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){let t="";const n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},s&&(c.prototype[s]=c.prototype.inspect),c.prototype.compare=function(t,e,n,i,r){if(X(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(this===t)return 0;let s=(r>>>=0)-(i>>>=0),o=(n>>>=0)-(e>>>=0);const h=Math.min(s,o),a=this.slice(i,r),u=t.slice(e,n);for(let t=0;t<h;++t)if(a[t]!==u[t]){s=a[t],o=u[t];break}return s<o?-1:o<s?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},c.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}const r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":case"latin1":case"binary":return T(this,t,e,n);case"base64":return _(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const O=4096;function k(t,e,n){let i="";n=Math.min(t.length,n);for(let r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function x(t,e,n){let i="";n=Math.min(t.length,n);for(let r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function I(t,e,n){const i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);let r="";for(let i=e;i<n;++i)r+=q[t[i]];return r}function B(t,e,n){const i=t.slice(e,n);let r="";for(let t=0;t<i.length-1;t+=2)r+=String.fromCharCode(i[t]+256*i[t+1]);return r}function C(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,i,r,s){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<s)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function N(t,e,n,i,r){z(e,i,r,t,n,7);let s=Number(e&BigInt(4294967295));t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,n}function U(t,e,n,i,r){z(e,i,r,t,n,7);let s=Number(e&BigInt(4294967295));t[n+7]=s,s>>=8,t[n+6]=s,s>>=8,t[n+5]=s,s>>=8,t[n+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=o,o>>=8,t[n+2]=o,o>>=8,t[n+1]=o,o>>=8,t[n]=o,n+8}function D(t,e,n,i,r,s){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(t,e,n,i,s){return e=+e,n>>>=0,s||D(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function P(t,e,n,i,s){return e=+e,n>>>=0,s||D(t,0,n,8),r.write(t,e,n,i,52,8),n+8}c.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const i=this.subarray(t,e);return Object.setPrototypeOf(i,c.prototype),i},c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let i=this[t],r=1,s=0;for(;++s<e&&(r*=256);)i+=this[t+s]*r;return i},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let i=this[t+--e],r=1;for(;e>0&&(r*=256);)i+=this[t+--e]*r;return i},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readBigUInt64LE=Q((function(t){G(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||$(t,this.length-8);const i=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,r=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(i)+(BigInt(r)<<BigInt(32))})),c.prototype.readBigUInt64BE=Q((function(t){G(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||$(t,this.length-8);const i=e*2**24+65536*this[++t]+256*this[++t]+this[++t],r=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(i)<<BigInt(32))+BigInt(r)})),c.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let i=this[t],r=1,s=0;for(;++s<e&&(r*=256);)i+=this[t+s]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*e)),i},c.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let i=e,r=1,s=this[t+--i];for(;i>0&&(r*=256);)s+=this[t+--i]*r;return r*=128,s>=r&&(s-=Math.pow(2,8*e)),s},c.prototype.readInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||C(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){t>>>=0,e||C(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readBigInt64LE=Q((function(t){G(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||$(t,this.length-8);const i=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),c.prototype.readBigInt64BE=Q((function(t){G(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||$(t,this.length-8);const i=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(i)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),c.prototype.readFloatLE=function(t,e){return t>>>=0,e||C(t,4,this.length),r.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||C(t,4,this.length),r.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||C(t,8,this.length),r.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||C(t,8,this.length),r.read(this,t,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,n,i){t=+t,e>>>=0,n>>>=0,i||R(this,t,e,n,Math.pow(2,8*n)-1,0);let r=1,s=0;for(this[e]=255&t;++s<n&&(r*=256);)this[e+s]=t/r&255;return e+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,n,i){t=+t,e>>>=0,n>>>=0,i||R(this,t,e,n,Math.pow(2,8*n)-1,0);let r=n-1,s=1;for(this[e+r]=255&t;--r>=0&&(s*=256);)this[e+r]=t/s&255;return e+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigUInt64LE=Q((function(t,e=0){return N(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=Q((function(t,e=0){return U(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e>>>=0,!i){const i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}let r=0,s=1,o=0;for(this[e]=255&t;++r<n&&(s*=256);)t<0&&0===o&&0!==this[e+r-1]&&(o=1),this[e+r]=(t/s>>0)-o&255;return e+n},c.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e>>>=0,!i){const i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}let r=n-1,s=1,o=0;for(this[e+r]=255&t;--r>=0&&(s*=256);)t<0&&0===o&&0!==this[e+r+1]&&(o=1),this[e+r]=(t/s>>0)-o&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigInt64LE=Q((function(t,e=0){return N(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=Q((function(t,e=0){return U(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return P(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return P(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,i){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);const r=i-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,i):Uint8Array.prototype.set.call(t,this.subarray(n,i),e),r},c.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===t.length){const e=t.charCodeAt(0);("utf8"===i&&e<128||"latin1"===i)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let r;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(r=e;r<n;++r)this[r]=t;else{const s=c.isBuffer(t)?t:c.from(t,i),o=s.length;if(0===o)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(r=0;r<n-e;++r)this[r+e]=s[r%o]}return this};const M={};function V(t,e,n){M[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function j(t){let e="",n=t.length;const i="-"===t[0]?1:0;for(;n>=i+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function z(t,e,n,i,r,s){if(t>n||t<e){const i="bigint"==typeof e?"n":"";let r;throw r=s>3?0===e||e===BigInt(0)?`>= 0${i} and < 2${i} ** ${8*(s+1)}${i}`:`>= -(2${i} ** ${8*(s+1)-1}${i}) and < 2 ** ${8*(s+1)-1}${i}`:`>= ${e}${i} and <= ${n}${i}`,new M.ERR_OUT_OF_RANGE("value",r,t)}!function(t,e,n){G(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||$(e,t.length-(n+1))}(i,r,s)}function G(t,e){if("number"!=typeof t)throw new M.ERR_INVALID_ARG_TYPE(e,"number",t)}function $(t,e,n){if(Math.floor(t)!==t)throw G(t,n),new M.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new M.ERR_BUFFER_OUT_OF_BOUNDS;throw new M.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}V("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),V("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),V("ERR_OUT_OF_RANGE",(function(t,e,n){let i=`The value of "${t}" is out of range.`,r=n;return Number.isInteger(n)&&Math.abs(n)>2**32?r=j(String(n)):"bigint"==typeof n&&(r=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(r=j(r)),r+="n"),i+=` It must be ${e}. Received ${r}`,i}),RangeError);const K=/[^+/0-9A-Za-z-_]/g;function W(t,e){let n;e=e||1/0;const i=t.length;let r=null;const s=[];for(let o=0;o<i;++o){if(n=t.charCodeAt(o),n>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===i){(e-=3)>-1&&s.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&s.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function Y(t){return i.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(K,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,n,i){let r;for(r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}function X(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function J(t){return t!=t}const q=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const i=16*n;for(let r=0;r<16;++r)e[i+r]=t[n]+t[r]}return e}();function Q(t){return"undefined"==typeof BigInt?Z:t}function Z(){throw new Error("BigInt not supported")}},6957:(t,e,n)=>{var i=n(886);e.fromCallback=function(t,e){if(void 0===t){var n=new Promise((function(e,n){t=function(t,i){t?n(t):e(i)}}));t[void 0!==e?e:"promise"]=n}else if("function"!=typeof t)throw new TypeError("Callback must be a function");return t},e.fromPromise=function(t,e){if(void 0===e)return t;t.then((function(t){i((()=>e(null,t)))})).catch((function(t){i((()=>e(t)))}))}},886:t=>{t.exports="function"==typeof queueMicrotask?queueMicrotask:t=>Promise.resolve().then(t)},6729:t=>{var e=Object.prototype.hasOwnProperty,n="~";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,i,s,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var h=new r(i,s||t,o),c=n?n+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],h]:t._events[c].push(h):(t._events[c]=h,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function h(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),h.prototype.eventNames=function(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)e.call(t,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},h.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,o=new Array(s);r<s;r++)o[r]=i[r].fn;return o},h.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},h.prototype.emit=function(t,e,i,r,s,o){var h=n?n+t:t;if(!this._events[h])return!1;var c,a,u=this._events[h],l=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,r),!0;case 5:return u.fn.call(u.context,e,i,r,s),!0;case 6:return u.fn.call(u.context,e,i,r,s,o),!0}for(a=1,c=new Array(l-1);a<l;a++)c[a-1]=arguments[a];u.fn.apply(u.context,c)}else{var f,d=u.length;for(a=0;a<d;a++)switch(u[a].once&&this.removeListener(t,u[a].fn,void 0,!0),l){case 1:u[a].fn.call(u[a].context);break;case 2:u[a].fn.call(u[a].context,e);break;case 3:u[a].fn.call(u[a].context,e,i);break;case 4:u[a].fn.call(u[a].context,e,i,r);break;default:if(!c)for(f=1,c=new Array(l-1);f<l;f++)c[f-1]=arguments[f];u[a].fn.apply(u[a].context,c)}}return!0},h.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},h.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},h.prototype.removeListener=function(t,e,i,r){var s=n?n+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var h=this._events[s];if(h.fn)h.fn!==e||r&&!h.once||i&&h.context!==i||o(this,s);else{for(var c=0,a=[],u=h.length;c<u;c++)(h[c].fn!==e||r&&!h[c].once||i&&h[c].context!==i)&&a.push(h[c]);a.length?this._events[s]=1===a.length?a[0]:a:o(this,s)}return this},h.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&o(this,e)):(this._events=new i,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=n,h.EventEmitter=h,t.exports=h},7187:t=>{var e,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var r=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(n,i){function r(n){t.removeListener(e,s),i(n)}function s(){"function"==typeof t.removeListener&&t.removeListener("error",r),n([].slice.call(arguments))}y(t,e,s,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&y(t,"error",e,{once:!0})}(t,r)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function h(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function a(t,e,n,i){var r,s,o,a;if(h(n),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),void 0===o)o=s[e]=n,++t._eventsCount;else if("function"==typeof o?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),(r=c(t))>0&&o.length>r&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=o.length,a=u,console&&console.warn&&console.warn(a)}return t}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=u.bind(i);return r.listener=n,i.wrapFn=r,r}function f(t,e,n){var i=t._events;if(void 0===i)return[];var r=i[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):p(r,r.length)}function d(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function y(t,e,n,i){if("function"==typeof t.on)i.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function r(s){i.once&&t.removeEventListener(e,r),n(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,s=this._events;if(void 0!==s)r=r&&void 0===s.error;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var h=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw h.context=o,h}var c=s[t];if(void 0===c)return!1;if("function"==typeof c)i(c,this,e);else{var a=c.length,u=p(c,a);for(n=0;n<a;++n)i(u[n],this,e)}return!0},s.prototype.addListener=function(t,e){return a(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return a(this,t,e,!0)},s.prototype.once=function(t,e){return h(e),this.on(t,l(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return h(e),this.prependListener(t,l(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,i,r,s,o;if(h(e),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){o=n[s].listener,r=s;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,o||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,s=Object.keys(n);for(i=0;i<s.length;++i)"removeListener"!==(r=s[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},s.prototype.listeners=function(t){return f(this,t,!0)},s.prototype.rawListeners=function(t){return f(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},s.prototype.listenerCount=d,s.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},645:(t,e)=>{e.read=function(t,e,n,i,r){var s,o,h=8*r-i-1,c=(1<<h)-1,a=c>>1,u=-7,l=n?r-1:0,f=n?-1:1,d=t[e+l];for(l+=f,s=d&(1<<-u)-1,d>>=-u,u+=h;u>0;s=256*s+t[e+l],l+=f,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=i;u>0;o=256*o+t[e+l],l+=f,u-=8);if(0===s)s=1-a;else{if(s===c)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,i),s-=a}return(d?-1:1)*o*Math.pow(2,s-i)},e.write=function(t,e,n,i,r,s){var o,h,c,a=8*s-r-1,u=(1<<a)-1,l=u>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:s-1,p=i?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(h=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),(e+=o+l>=1?f/c:f*Math.pow(2,1-l))*c>=2&&(o++,c/=2),o+l>=u?(h=0,o=u):o+l>=1?(h=(e*c-1)*Math.pow(2,r),o+=l):(h=e*Math.pow(2,l-1)*Math.pow(2,r),o=0));r>=8;t[n+d]=255&h,d+=p,h/=256,r-=8);for(o=o<<r|h,a+=r;a>0;t[n+d]=255&o,d+=p,o/=256,a-=8);t[n+d-p]|=128*y}},8499:(t,e,n)=>{const i=n(4473),r=n(8002),{Encoding:s}=n(8266),{BufferFormat:o,ViewFormat:h,UTF8Format:c}=n(2376),a=Symbol("formats"),u=Symbol("encodings"),l=new Set(["buffer","view","utf8"]);e.Transcoder=class{constructor(t){if(!Array.isArray(t))throw new TypeError("The first argument 'formats' must be an array");if(!t.every((t=>l.has(t))))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'");this[u]=new Map,this[a]=new Set(t);for(const t in r)try{this.encoding(t)}catch(t){if("LEVEL_ENCODING_NOT_SUPPORTED"!==t.code)throw t}}encodings(){return Array.from(new Set(this[u].values()))}encoding(t){let e=this[u].get(t);if(void 0===e){if("string"==typeof t&&""!==t){if(e=d[t],!e)throw new i(`Encoding '${t}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if("object"!=typeof t||null===t)throw new TypeError("First argument 'encoding' must be a string or object");e=function(t){if(t instanceof s)return t;const e="type"in t&&"string"==typeof t.type?t.type:void 0,n=t.name||e||"anonymous-"+p++;switch(function(t){return"format"in t&&void 0!==t.format?t.format:"buffer"in t&&"boolean"==typeof t.buffer?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}(t)){case"view":return new h({...t,name:n});case"utf8":return new c({...t,name:n});case"buffer":return new o({...t,name:n});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}(t)}const{name:n,format:r}=e;if(!this[a].has(r))if(this[a].has("view"))e=e.createViewTranscoder();else if(this[a].has("buffer"))e=e.createBufferTranscoder();else{if(!this[a].has("utf8"))throw new i(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});e=e.createUTF8Transcoder()}for(const i of[t,n,e.name,e.commonName])this[u].set(i,e)}return e}};const f={binary:r.buffer,"utf-8":r.utf8},d={...r,...f};let p=0},8266:(t,e,n)=>{const i=n(4473),r=new Set(["buffer","view","utf8"]);e.Encoding=class{constructor(t){if(this.encode=t.encode||this.encode,this.decode=t.decode||this.decode,this.name=t.name||this.name,this.format=t.format||this.format,"function"!=typeof this.encode)throw new TypeError("The 'encode' property must be a function");if("function"!=typeof this.decode)throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),"string"!=typeof this.name||""===this.name)throw new TypeError("The 'name' property must be a string");if("string"!=typeof this.format||!r.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");t.createViewTranscoder&&(this.createViewTranscoder=t.createViewTranscoder),t.createBufferTranscoder&&(this.createBufferTranscoder=t.createBufferTranscoder),t.createUTF8Transcoder&&(this.createUTF8Transcoder=t.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new i(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new i(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new i(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}}},8002:(t,e,n)=>{const{Buffer:i}=n(8764)||{Buffer:{isBuffer:()=>!1}},{textEncoder:r,textDecoder:s}=n(5850)(),{BufferFormat:o,ViewFormat:h,UTF8Format:c}=n(2376),a=t=>t;e.utf8=new c({encode:function(t){return i.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?s.decode(t):String(t)},decode:a,name:"utf8",createViewTranscoder(){return new h({encode:function(t){return ArrayBuffer.isView(t)?t:r.encode(t)},decode:function(t){return s.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new o({encode:function(t){return i.isBuffer(t)?t:ArrayBuffer.isView(t)?i.from(t.buffer,t.byteOffset,t.byteLength):i.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}}),e.json=new c({encode:JSON.stringify,decode:JSON.parse,name:"json"}),e.buffer=new o({encode:function(t){return i.isBuffer(t)?t:ArrayBuffer.isView(t)?i.from(t.buffer,t.byteOffset,t.byteLength):i.from(String(t),"utf8")},decode:a,name:"buffer",createViewTranscoder(){return new h({encode:function(t){return ArrayBuffer.isView(t)?t:i.from(String(t),"utf8")},decode:function(t){return i.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}}),e.view=new h({encode:function(t){return ArrayBuffer.isView(t)?t:r.encode(t)},decode:a,name:"view",createBufferTranscoder(){return new o({encode:function(t){return i.isBuffer(t)?t:ArrayBuffer.isView(t)?i.from(t.buffer,t.byteOffset,t.byteLength):i.from(String(t),"utf8")},decode:a,name:`${this.name}+buffer`})}}),e.hex=new o({encode:function(t){return i.isBuffer(t)?t:i.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"}),e.base64=new o({encode:function(t){return i.isBuffer(t)?t:i.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"})},2376:(t,e,n)=>{const{Buffer:i}=n(8764)||{},{Encoding:r}=n(8266),s=n(5850);class o extends r{constructor(t){super({...t,format:"buffer"})}createViewTranscoder(){return new h({encode:this.encode,decode:t=>this.decode(i.from(t.buffer,t.byteOffset,t.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}}class h extends r{constructor(t){super({...t,format:"view"})}createBufferTranscoder(){return new o({encode:t=>{const e=this.encode(t);return i.from(e.buffer,e.byteOffset,e.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}}e.BufferFormat=o,e.ViewFormat=h,e.UTF8Format=class extends r{constructor(t){super({...t,format:"utf8"})}createBufferTranscoder(){return new o({encode:t=>i.from(this.encode(t),"utf8"),decode:t=>this.decode(t.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:t,textDecoder:e}=s();return new h({encode:e=>t.encode(this.encode(e)),decode:t=>this.decode(e.decode(t)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}}},5850:t=>{let e=null;t.exports=function(){return null===e&&(e={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),e}},4473:t=>{t.exports=class extends Error{constructor(t,e){super(t||""),"object"==typeof e&&null!==e&&(e.code&&(this.code=String(e.code)),e.expected&&(this.expected=!0),e.transient&&(this.transient=!0),e.cause&&(this.cause=e.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}},6349:function(t,e){!function(t){const e=function(t,e){return t.slice(e-1).map(((n,i)=>t.slice(i,i+e)))};t.ngraminator=function(t,n){return n.reduce(((n,i)=>[...e(t,i),...n]),[]).sort()},Object.defineProperty(t,"__esModule",{value:!0})}(e)},4155:t=>{var e,n,i=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(t){if(e===setTimeout)return setTimeout(t,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:r}catch(t){e=r}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var h,c=[],a=!1,u=-1;function l(){a&&h&&(a=!1,h.length?c=h.concat(c):u=-1,c.length&&f())}function f(){if(!a){var t=o(l);a=!0;for(var e=c.length;e;){for(h=c,c=[];++u<e;)h&&h[u].run();u=-1,e=c.length}h=null,a=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function p(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||a||o(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},4375:(t,e,n)=>{let i;t.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:n.g):t=>(i||(i=Promise.resolve())).then(t).catch((t=>setTimeout((()=>{throw t}),0)))},9967:(t,e,n)=>{t.exports=function(t,e,n){if("number"!=typeof e)throw new Error("second argument must be a Number");let r,s,o,h,c,a,u=!0;function l(t){function e(){n&&n(t,r),n=null}u?i(e):e()}function f(e,n,i){if(r[e]=i,n&&(c=!0),0==--o||n)l(n);else if(!c&&a<s){let e;h?(e=h[a],a+=1,t[e]((function(t,n){f(e,t,n)}))):(e=a,a+=1,t[e]((function(t,n){f(e,t,n)})))}}Array.isArray(t)?(r=[],o=s=t.length):(h=Object.keys(t),r={},o=s=h.length),a=e,o?h?h.some((function(n,i){return t[n]((function(t,e){f(n,t,e)})),i===e-1})):t.some((function(t,n){return t((function(t,e){f(n,t,e)})),n===e-1})):l(null),u=!1};const i=n(4375)},971:t=>{t.exports=function(t,e){e=Object.assign({},{ngramLengths:[1]},e);const n=t.reduce(((t,n,i,r)=>(e.ngramLengths.forEach((e=>{var s=r.slice(i,i+e);s.length===e&&(n=JSON.stringify(s),t[n]=t[n]||[],t[n].push(i))})),t)),{});return Object.keys(n).map((t=>({term:JSON.parse(t),positions:n[t]}))).sort(((t,e)=>t.term[0]>e.term[0]))}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i].call(s.exports,s,s.exports,n),s.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var i={};(()=>{n.d(i,{W:()=>_t,ui:()=>Lt});var t=n(971),e=n(6349);const r=([t,e,n])=>Promise.resolve([t.match(n.tokenSplitRegex)||[],e,n]),s=([t,e,n])=>[n.skipFields.includes(e)?[]:t,e,n],o=([t,e,n])=>Promise.resolve([t.map((t=>n.caseSensitive?t:t.toLowerCase())),e,n]),h=([t,e,n])=>{const{fields:i,values:r}=n.replace,s=()=>t.reduce(((t,e)=>[e,...t,...r[e]||[]]),[]);return r?i?i.includes(e)?Promise.resolve([s(),e,n]):Promise.resolve([t,e,n]):Promise.resolve([s(),e,n]):Promise.resolve([t,e,n])},c=([t,n,i])=>{let{fields:r,lengths:s,join:o=" "}=i.ngrams;return r||(r=[n]),s&&r.includes(n)?[(0,e.ngraminator)(t.filter((t=>null!==t)),s).map((t=>t.join(o))),n,i]:Promise.resolve([t,n,i])},a=([t,e,n])=>[t.filter((t=>!n.stopwords.includes(t.toLowerCase()))),e,n],u=([e,n,i])=>{const r=t(e),s=r.reduce(((t,e)=>Math.max(e.positions.length,t)),0);return Promise.resolve([r.map((t=>[t.term[0],(t.positions.length/s).toFixed(2)])).sort(),n,i])},l=(t,e,n)=>r([t,e,n]).then(s).then(o).then(h).then(c).then(a).then(u).then((([t,e,n])=>t));var f=n(6096),d=n(2493);function p(t,e){const n=t=>"string"==typeof t,i=async(n,i=(t=>new Promise((e=>e(t)))))=>new Promise((async(s,h)=>{const c=t=>void 0===t?s(void 0):t instanceof Promise?s(t):void 0;try{c(n),n=e.parse(n),n=await(e=>e.VALUE.GTE===e.VALUE.LTE&&t.stopwords.includes(e.VALUE.GTE)?void 0:e)(n),c(n=await(e=>void 0===e?o(void 0):e.VALUE.GTE===e.VALUE.LTE&&t.queryReplace&&t.queryReplace[e.VALUE.GTE]?r(t.queryReplace[e.VALUE.GTE].map((t=>({FIELD:e.FIELD,VALUE:{GTE:t,LTE:t}})))).then((t=>t.union)):e)(n)),c(n=await i(n))}catch(t){return h(t)}return Array.isArray(n)?s(n):s(o(n))})),r=async(t,e)=>Promise.all(t.map((t=>i(t,e)))).then((t=>{const e=t.flat(1/0).reduce(((t,e)=>(e&&t.set(e._id,[...t.get(e._id)||[],e._match]),t)),new Map);return{sumTokensMinusStopwords:t.filter((t=>t)).length,union:Array.from(e.keys()).map((t=>({_id:t,_match:e.get(t)})))}})),s=(t,e,n)=>{const i=[];return void 0===e&&"number"!=typeof e||i.push(e),n&&i.push(d.HI),["IDX",t,i]},o=t=>new Promise((e=>{if(void 0===t)return e(void 0);const n=new Map;Promise.all(t.FIELD.map((e=>a({gte:s(e,t.VALUE.GTE),lte:s(e,t.VALUE.LTE,!0),limit:t.LIMIT,reverse:t.REVERSE}).then((t=>t.forEach((t=>t.value.forEach((e=>n.set(e,[...n.get(e)||[],JSON.stringify({FIELD:t.key[1],VALUE:t.key[2][0],SCORE:t.key[2][1]})])))))))))).then((()=>e(Array.from(n.keys()).map((t=>({_id:t,_match:n.get(t)}))))))})),h=(t,e,n=!0)=>e?0===e.length?[]:(e=new Set(e.map((t=>t._id))),t.map((t=>Object.assign(t,{_id:[...new Set([...t._id].filter((t=>e.has(t))))]}))).filter((t=>!n||t._id.length))):t,c=t=>(t=e.parse(t),i(t).then((e=>({_id:[...e.reduce(((t,e)=>t.add(e._id)),new Set)].sort(),VALUE:t.VALUE,...t})))),a=e=>t.db.iterator(e).all().then((t=>t.map((([t,e])=>({key:t,value:e}))))),u=(t,n)=>o({...e.parse(t),LIMIT:1,REVERSE:n}).then((t=>t.length?JSON.parse(t.pop()._match.pop()).VALUE:null)),l=t=>(t=e.parse(t),Promise.all(t.FIELD.map((e=>{let n=t.VALUE.LTE;void 0!==t.VALUE.LTE&&"number"!=typeof t.VALUE.LTE&&(n+="");let i=t.VALUE.GTE;return t.VALUE.GTE&&"number"!=typeof t.VALUE.GTE&&(i+=" "),a({gte:s(e,i),lte:s(e,n,!0),keys:!0,values:!1}).then((t=>t.map((({key:t})=>({FIELD:t[1],VALUE:t[2][0]})))))}))).then((t=>t.flat()))),f=t=>(t=e.parse(t),Promise.all(t.FIELD.map((e=>a({gte:s(e,t.VALUE.GTE),lte:s(e,t.VALUE.LTE,!0)}).then((t=>t.map((t=>({FIELD:t.key[1],VALUE:t.key[2][0],_id:t.value})))))))).then((t=>t.flat()))),p=new Intl.Collator("en",{numeric:!0,sensitivity:"base"});return{AGGREGATE:({BUCKETS:t,FACETS:e,QUERY:n})=>Promise.all([t,e,n]).then((([t=[],e=[],n=[]])=>({BUCKETS:h(t.flat(),n),FACETS:h(e.flat(),n),RESULT:n}))),AGGREGATION_FILTER:h,BUCKET:c,BUCKETS:(...t)=>Promise.all(t.map(c)),CREATED:()=>t.db.get(["~CREATED"]),DISTINCT:(...t)=>Promise.all(t.length?t.map(l):[l({})]).then((t=>[...t.flat().reduce(((t,e)=>t.add(JSON.stringify(e))),new Set)].map(JSON.parse))),EXIST:(...e)=>Promise.all(e.map((e=>t.db.get([t.docExistsSpace,e]).catch((t=>null))))).then((t=>t.reduce(((t,n,i)=>(null!=n&&t.push(e[i]),t)),[]))),EXPORT:a,FACETS:(...t)=>Promise.all(t.length?t.map(f):[f({})]).then((t=>[...t.flat().reduce(((t,e)=>t.add(JSON.stringify(e))),new Set)].map(JSON.parse))),FIELDS:()=>a({gte:["FIELD",d.LO],lte:["FIELD",d.HI]}).then((t=>t.map((t=>t.key[1])))),GET:i,INTERSECTION:(t,e)=>r(t,e).then((t=>t.union.filter((e=>e._match.length===t.sumTokensMinusStopwords)))),LAST_UPDATED:()=>t.db.get(["~LAST_UPDATED"]),MAX:t=>u(t,!0),MIN:u,OBJECT:e=>Promise.all(e.map((e=>t.db.get(["DOC",e._id]).catch((t=>null))))).then((t=>e.map(((e,n)=>(e._object=t[n],e))))),SET_SUBTRACTION:(t,e)=>Promise.all([n(t)?i(t):t,n(e)?i(e):e]).then((([t,e])=>t.filter((t=>-1===e.map((t=>t._id)).indexOf(t._id))))),SORT:t=>new Promise((e=>e(t.sort(((t,e)=>p.compare(t._id,e._id)))))),UNION:r}}d.LO=null,d.HI=void 0;var y=n(6472);const g=null,E=void 0;class m{availableFields=[];#t;constructor(t){this.#t=t}setAvailableFields=t=>{this.availableFields=t};#e=t=>{const e=t=>this.#t||"string"!=typeof t?t:t.toLowerCase();return{FIELD:t.FIELD.map(e),VALUE:{GTE:e(t.VALUE.GTE),LTE:e(t.VALUE.LTE)}}};parse(t){if(Array.isArray(t))throw new Error("token cannot be Array");if(void 0===t&&(t={}),"string"==typeof t){if(-1===t.indexOf(":"))return this.#e({FIELD:this.availableFields,VALUE:{GTE:t,LTE:t}});const[e,...n]=t.split(":");return this.#e({FIELD:[e],VALUE:{GTE:n.join(":"),LTE:n.join(":")}})}return"number"==typeof t&&(t={VALUE:{GTE:t,LTE:t}}),null===t.VALUE&&(t.VALUE={GTE:null,LTE:null}),"string"!=typeof t.VALUE&&"number"!=typeof t.VALUE||(t.VALUE={GTE:t.VALUE,LTE:t.VALUE}),void 0!==t.VALUE&&Object.keys(t.VALUE).length||(t.VALUE={GTE:g,LTE:E}),void 0===t.VALUE.GTE&&(t.VALUE.GTE=g),void 0===t.VALUE.LTE&&(t.VALUE.LTE=E),t.VALUE=Object.assign(t.VALUE,{GTE:t.VALUE.GTE,LTE:t.VALUE.LTE}),void 0===t.FIELD?this.#e({FIELD:this.availableFields,...t}):(t.FIELD=[t.FIELD].flat(),this.#e(t))}}class b{constructor(t={}){t={caseSensitive:!0,isLeaf:t=>"string"==typeof t||"number"==typeof t,stopwords:[],doNotIndexField:[],storeVectors:!0,docExistsSpace:"DOC",db:new t.Level(t.name,{keyEncoding:d,valueEncoding:"json"}),...t};const e=new m(t.caseSensitive),n=p(t,e),i=function(t,e){let n=0;const i=(e,n)=>{if(null==e._object)return{_id:e._id,keys:[]};const i=[];return y(e._object).forEach((function(e){const r=this.path.filter((t=>!Number.isInteger(+t))).join(".");if("_id"!==r&&!n.doNotIndexField.filter((t=>r.startsWith(t))).length&&t.isLeaf(this.node)){if(!t.stopwords.includes(this.node)){const e=JSON.stringify([r,[this.node].flat(1/0).map((e=>"string"!=typeof e||t.caseSensitive?e:e.toLowerCase()))]);i.push(t.caseSensitive?e:e.toLowerCase())}this.update(this.node,!0)}})),{_id:e._id,keys:i}},r=(t,e)=>(e.keys.forEach((n=>{t[n]=t[n]||[],t[n].push(e._id)})),t),s=(e,s,o,h,c)=>new Promise((a=>{e=e.map((t=>{var e;return t._id=void 0===(e=t._id)?++n:"string"==typeof e||"number"==typeof e?e:void 0,t._object&&(t._object._id=t._id),t})),c=Object.assign(t,c),p(t).EXIST(...e.map((t=>t._id))).then((t=>((t,e,n)=>{const i=Object.keys(t);return Promise.all(i.map((t=>["IDX",...JSON.parse(t)])).map((t=>new Promise(((n,i)=>e.get(t).then(n).catch((t=>n([])))))))).then((e=>e.map(((e,r)=>{const s=new Set(e),o=new Set(t[i[r]]);if("put"===n)return{key:["IDX",...JSON.parse(i[r])],type:n,value:[...new Set([...s,...o])].sort()};if("del"===n){const t=[...new Set([...s].filter((t=>!o.has(t))))];return{key:["IDX",...JSON.parse(i[r])],type:0===t.length?"del":"put",value:t}}return e}))))})(((t,e)=>t.map((t=>i(t,e))).reduce(r,{}))(e,c),s,o).then((n=>s.batch(n.concat(c.storeVectors?((t,e)=>t.map((t=>({key:["DOC",t._id],type:e,value:t._object}))))(e,o):[]).concat((t=>[...new Set(t.map((t=>t.key[1].split(":")[0])))].map((t=>({type:"put",key:["FIELD",t],value:t}))))(n)),(n=>a(e.map((e=>{let n;return"put"===o?n=t.includes(e._id)?"UPDATED":"CREATED":"del"===o&&(n=null===e._object?"FAILED":"DELETED"),{_id:e._id,operation:h,status:n}})))))))))})),o=e=>t.db.put(["~LAST_UPDATED"],Date.now()).then((()=>e));return{DELETE:e=>p(t).OBJECT(e.map((t=>({_id:t})))).then((e=>s(e,t.db,"del","DELETE",{}))).then(o),IMPORT:n=>t.db.clear().then((()=>t.db.batch(n.map((t=>Object.assign(t,{type:"put"})))))).then((()=>p(t).FIELDS())).then((t=>e.setAvailableFields(t))),PUT:(n,i={})=>s(n.map((t=>({_id:t._id,_object:t}))),t.db,"put","PUT",i).then(o).then((async n=>(e.setAvailableFields(await p(t).FIELDS()),n))),TIMESTAMP:()=>t.db.get(["~CREATED"]).then().catch((e=>t.db.put(["~CREATED"],Date.now()).then(o))),TIMESTAMP_LAST_UPDATED:o}}(t,e);i.TIMESTAMP(),this.AGGREGATION_FILTER=n.AGGREGATION_FILTER,this.AND=(t,e)=>n.INTERSECTION(t,e).then(this.flattenMatchArrayInResults),this.BUCKET=n.BUCKET,this.BUCKETS=n.BUCKETS,this.CREATED=n.CREATED,this.DELETE=i.DELETE,this.DISTINCT=n.DISTINCT,this.EXIST=n.EXIST,this.EXPORT=n.EXPORT,this.FACETS=n.FACETS,this.FIELDS=n.FIELDS,this.GET=(t,e)=>n.GET(t,e).then(this.flattenMatchArrayInResults),this.IMPORT=i.IMPORT,this.LAST_UPDATED=n.LAST_UPDATED,this.MAX=n.MAX,this.MIN=n.MIN,this.NOT=(...t)=>n.SET_SUBTRACTION(...t).then(this.flattenMatchArrayInResults),this.OBJECT=n.OBJECT,this.OR=(t,e)=>n.UNION(t,e).then((t=>t.union)).then(this.flattenMatchArrayInResults),this.PUT=i.PUT,this.SORT=n.SORT,this.STORE=t.db,this.TIMESTAMP_LAST_UPDATED=i.TIMESTAMP_LAST_UPDATED,this.TOKEN_PARSER=e}flattenMatchArrayInResults(t){return void 0===t?void 0:t.map((t=>(t._match=t._match.flat(1/0).map((t=>"string"==typeof t?JSON.parse(t):t)).sort(((t,e)=>t.FIELD<e.FIELD?-1:t.FIELD>e.FIELD?1:t.VALUE<e.VALUE?-1:t.VALUE>e.VALUE?1:t.SCORE<e.SCORE?-1:t.SCORE>e.SCORE?1:0)),t)))}}class v{constructor(t={}){return new b({Level:f.v,...t})}}var w=n(4155);const T="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,_=new Set,L="object"==typeof w&&w?w:{},A=(t,e,n,i)=>{"function"==typeof L.emitWarning?L.emitWarning(t,e,n,i):console.error(`[${n}] ${e}: ${t}`)};let S=globalThis.AbortController,O=globalThis.AbortSignal;if(void 0===S){O=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(t,e){this._onabort.push(e)}},S=class{constructor(){e()}signal=new O;abort(t){if(!this.signal.aborted){this.signal.reason=t,this.signal.aborted=!0;for(const e of this.signal._onabort)e(t);this.signal.onabort?.(t)}}};let t="1"!==L.env?.LRU_CACHE_IGNORE_AC_WARNING;const e=()=>{t&&(t=!1,A("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}Symbol("type");const k=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),x=t=>k(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?I:null:null;class I extends Array{constructor(t){super(t),this.fill(0)}}class B{heap;length;static#n=!1;static create(t){const e=x(t);if(!e)return[];B.#n=!0;const n=new B(t,e);return B.#n=!1,n}constructor(t,e){if(!B.#n)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}}class C{#i;#r;#s;#o;#h;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#c;#a;#u;#l;#f;#d;#p;#y;#g;#E;#m;#b;#v;#w;#T;#_;#L;static unsafeExposeInternals(t){return{starts:t.#v,ttls:t.#w,sizes:t.#b,keyMap:t.#u,keyList:t.#l,valList:t.#f,next:t.#d,prev:t.#p,get head(){return t.#y},get tail(){return t.#g},free:t.#E,isBackgroundFetch:e=>t.#A(e),backgroundFetch:(e,n,i,r)=>t.#S(e,n,i,r),moveToTail:e=>t.#O(e),indexes:e=>t.#k(e),rindexes:e=>t.#x(e),isStale:e=>t.#I(e)}}get max(){return this.#i}get maxSize(){return this.#r}get calculatedSize(){return this.#a}get size(){return this.#c}get fetchMethod(){return this.#h}get dispose(){return this.#s}get disposeAfter(){return this.#o}constructor(t){const{max:e=0,ttl:n,ttlResolution:i=1,ttlAutopurge:r,updateAgeOnGet:s,updateAgeOnHas:o,allowStale:h,dispose:c,disposeAfter:a,noDisposeOnSet:u,noUpdateTTL:l,maxSize:f=0,maxEntrySize:d=0,sizeCalculation:p,fetchMethod:y,noDeleteOnFetchRejection:g,noDeleteOnStaleGet:E,allowStaleOnFetchRejection:m,allowStaleOnFetchAbort:b,ignoreFetchAbort:v}=t;if(0!==e&&!k(e))throw new TypeError("max option must be a nonnegative integer");const w=e?x(e):Array;if(!w)throw new Error("invalid max value: "+e);if(this.#i=e,this.#r=f,this.maxEntrySize=d||this.#r,this.sizeCalculation=p,this.sizeCalculation){if(!this.#r&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(void 0!==y&&"function"!=typeof y)throw new TypeError("fetchMethod must be a function if specified");if(this.#h=y,this.#_=!!y,this.#u=new Map,this.#l=new Array(e).fill(void 0),this.#f=new Array(e).fill(void 0),this.#d=new w(e),this.#p=new w(e),this.#y=0,this.#g=0,this.#E=B.create(e),this.#c=0,this.#a=0,"function"==typeof c&&(this.#s=c),"function"==typeof a?(this.#o=a,this.#m=[]):(this.#o=void 0,this.#m=void 0),this.#T=!!this.#s,this.#L=!!this.#o,this.noDisposeOnSet=!!u,this.noUpdateTTL=!!l,this.noDeleteOnFetchRejection=!!g,this.allowStaleOnFetchRejection=!!m,this.allowStaleOnFetchAbort=!!b,this.ignoreFetchAbort=!!v,0!==this.maxEntrySize){if(0!==this.#r&&!k(this.#r))throw new TypeError("maxSize must be a positive integer if specified");if(!k(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#B()}if(this.allowStale=!!h,this.noDeleteOnStaleGet=!!E,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!o,this.ttlResolution=k(i)||0===i?i:1,this.ttlAutopurge=!!r,this.ttl=n||0,this.ttl){if(!k(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#C()}if(0===this.#i&&0===this.ttl&&0===this.#r)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#i&&!this.#r){const t="LRU_CACHE_UNBOUNDED";(t=>!_.has(t))(t)&&(_.add(t),A("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",t,C))}}getRemainingTTL(t){return this.#u.has(t)?1/0:0}#C(){const t=new I(this.#i),e=new I(this.#i);this.#w=t,this.#v=e,this.#R=(n,i,r=T.now())=>{if(e[n]=0!==i?r:0,t[n]=i,0!==i&&this.ttlAutopurge){const t=setTimeout((()=>{this.#I(n)&&this.delete(this.#l[n])}),i+1);t.unref&&t.unref()}},this.#N=n=>{e[n]=0!==t[n]?T.now():0},this.#U=(r,s)=>{if(t[s]){const o=t[s],h=e[s];r.ttl=o,r.start=h,r.now=n||i();const c=r.now-h;r.remainingTTL=o-c}};let n=0;const i=()=>{const t=T.now();if(this.ttlResolution>0){n=t;const e=setTimeout((()=>n=0),this.ttlResolution);e.unref&&e.unref()}return t};this.getRemainingTTL=r=>{const s=this.#u.get(r);if(void 0===s)return 0;const o=t[s],h=e[s];return 0===o||0===h?1/0:o-((n||i())-h)},this.#I=r=>0!==t[r]&&0!==e[r]&&(n||i())-e[r]>t[r]}#N=()=>{};#U=()=>{};#R=()=>{};#I=()=>!1;#B(){const t=new I(this.#i);this.#a=0,this.#b=t,this.#D=e=>{this.#a-=t[e],t[e]=0},this.#F=(t,e,n,i)=>{if(this.#A(e))return 0;if(!k(n)){if(!i)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!=typeof i)throw new TypeError("sizeCalculation must be a function");if(n=i(e,t),!k(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return n},this.#P=(e,n,i)=>{if(t[e]=n,this.#r){const n=this.#r-t[e];for(;this.#a>n;)this.#M(!0)}this.#a+=t[e],i&&(i.entrySize=n,i.totalCalculatedSize=this.#a)}}#D=t=>{};#P=(t,e,n)=>{};#F=(t,e,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:t=this.allowStale}={}){if(this.#c)for(let e=this.#g;this.#V(e)&&(!t&&this.#I(e)||(yield e),e!==this.#y);)e=this.#p[e]}*#x({allowStale:t=this.allowStale}={}){if(this.#c)for(let e=this.#y;this.#V(e)&&(!t&&this.#I(e)||(yield e),e!==this.#g);)e=this.#d[e]}#V(t){return void 0!==t&&this.#u.get(this.#l[t])===t}*entries(){for(const t of this.#k())void 0===this.#f[t]||void 0===this.#l[t]||this.#A(this.#f[t])||(yield[this.#l[t],this.#f[t]])}*rentries(){for(const t of this.#x())void 0===this.#f[t]||void 0===this.#l[t]||this.#A(this.#f[t])||(yield[this.#l[t],this.#f[t]])}*keys(){for(const t of this.#k()){const e=this.#l[t];void 0===e||this.#A(this.#f[t])||(yield e)}}*rkeys(){for(const t of this.#x()){const e=this.#l[t];void 0===e||this.#A(this.#f[t])||(yield e)}}*values(){for(const t of this.#k())void 0===this.#f[t]||this.#A(this.#f[t])||(yield this.#f[t])}*rvalues(){for(const t of this.#x())void 0===this.#f[t]||this.#A(this.#f[t])||(yield this.#f[t])}[Symbol.iterator](){return this.entries()}find(t,e={}){for(const n of this.#k()){const i=this.#f[n],r=this.#A(i)?i.__staleWhileFetching:i;if(void 0!==r&&t(r,this.#l[n],this))return this.get(this.#l[n],e)}}forEach(t,e=this){for(const n of this.#k()){const i=this.#f[n],r=this.#A(i)?i.__staleWhileFetching:i;void 0!==r&&t.call(e,r,this.#l[n],this)}}rforEach(t,e=this){for(const n of this.#x()){const i=this.#f[n],r=this.#A(i)?i.__staleWhileFetching:i;void 0!==r&&t.call(e,r,this.#l[n],this)}}purgeStale(){let t=!1;for(const e of this.#x({allowStale:!0}))this.#I(e)&&(this.delete(this.#l[e]),t=!0);return t}dump(){const t=[];for(const e of this.#k({allowStale:!0})){const n=this.#l[e],i=this.#f[e],r=this.#A(i)?i.__staleWhileFetching:i;if(void 0===r||void 0===n)continue;const s={value:r};if(this.#w&&this.#v){s.ttl=this.#w[e];const t=T.now()-this.#v[e];s.start=Math.floor(Date.now()-t)}this.#b&&(s.size=this.#b[e]),t.unshift([n,s])}return t}load(t){this.clear();for(const[e,n]of t){if(n.start){const t=Date.now()-n.start;n.start=T.now()-t}this.set(e,n.value,n)}}set(t,e,n={}){if(void 0===e)return this.delete(t),this;const{ttl:i=this.ttl,start:r,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:h}=n;let{noUpdateTTL:c=this.noUpdateTTL}=n;const a=this.#F(t,e,n.size||0,o);if(this.maxEntrySize&&a>this.maxEntrySize)return h&&(h.set="miss",h.maxEntrySizeExceeded=!0),this.delete(t),this;let u=0===this.#c?void 0:this.#u.get(t);if(void 0===u)u=0===this.#c?this.#g:0!==this.#E.length?this.#E.pop():this.#c===this.#i?this.#M(!1):this.#c,this.#l[u]=t,this.#f[u]=e,this.#u.set(t,u),this.#d[this.#g]=u,this.#p[u]=this.#g,this.#g=u,this.#c++,this.#P(u,a,h),h&&(h.set="add"),c=!1;else{this.#O(u);const n=this.#f[u];if(e!==n){if(this.#_&&this.#A(n)?n.__abortController.abort(new Error("replaced")):s||(this.#T&&this.#s?.(n,t,"set"),this.#L&&this.#m?.push([n,t,"set"])),this.#D(u),this.#P(u,a,h),this.#f[u]=e,h){h.set="replace";const t=n&&this.#A(n)?n.__staleWhileFetching:n;void 0!==t&&(h.oldValue=t)}}else h&&(h.set="update")}if(0===i||this.#w||this.#C(),this.#w&&(c||this.#R(u,i,r),h&&this.#U(h,u)),!s&&this.#L&&this.#m){const t=this.#m;let e;for(;e=t?.shift();)this.#o?.(...e)}return this}pop(){try{for(;this.#c;){const t=this.#f[this.#y];if(this.#M(!0),this.#A(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(void 0!==t)return t}}finally{if(this.#L&&this.#m){const t=this.#m;let e;for(;e=t?.shift();)this.#o?.(...e)}}}#M(t){const e=this.#y,n=this.#l[e],i=this.#f[e];return this.#_&&this.#A(i)?i.__abortController.abort(new Error("evicted")):(this.#T||this.#L)&&(this.#T&&this.#s?.(i,n,"evict"),this.#L&&this.#m?.push([i,n,"evict"])),this.#D(e),t&&(this.#l[e]=void 0,this.#f[e]=void 0,this.#E.push(e)),1===this.#c?(this.#y=this.#g=0,this.#E.length=0):this.#y=this.#d[e],this.#u.delete(n),this.#c--,e}has(t,e={}){const{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=e,r=this.#u.get(t);if(void 0!==r){const t=this.#f[r];if(this.#A(t)&&void 0===t.__staleWhileFetching)return!1;if(!this.#I(r))return n&&this.#N(r),i&&(i.has="hit",this.#U(i,r)),!0;i&&(i.has="stale",this.#U(i,r))}else i&&(i.has="miss");return!1}peek(t,e={}){const{allowStale:n=this.allowStale}=e,i=this.#u.get(t);if(void 0!==i&&(n||!this.#I(i))){const t=this.#f[i];return this.#A(t)?t.__staleWhileFetching:t}}#S(t,e,n,i){const r=void 0===e?void 0:this.#f[e];if(this.#A(r))return r;const s=new S,{signal:o}=n;o?.addEventListener("abort",(()=>s.abort(o.reason)),{signal:s.signal});const h={signal:s.signal,options:n,context:i},c=(i,r=!1)=>{const{aborted:o}=s.signal,c=n.ignoreFetchAbort&&void 0!==i;if(n.status&&(o&&!r?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,c&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),o&&!c&&!r)return a(s.signal.reason);const l=u;return this.#f[e]===u&&(void 0===i?l.__staleWhileFetching?this.#f[e]=l.__staleWhileFetching:this.delete(t):(n.status&&(n.status.fetchUpdated=!0),this.set(t,i,h.options))),i},a=i=>{const{aborted:r}=s.signal,o=r&&n.allowStaleOnFetchAbort,h=o||n.allowStaleOnFetchRejection,c=h||n.noDeleteOnFetchRejection,a=u;if(this.#f[e]===u&&(c&&void 0!==a.__staleWhileFetching?o||(this.#f[e]=a.__staleWhileFetching):this.delete(t)),h)return n.status&&void 0!==a.__staleWhileFetching&&(n.status.returnedStale=!0),a.__staleWhileFetching;if(a.__returned===a)throw i};n.status&&(n.status.fetchDispatched=!0);const u=new Promise(((e,i)=>{const o=this.#h?.(t,r,h);o&&o instanceof Promise&&o.then((t=>e(void 0===t?void 0:t)),i),s.signal.addEventListener("abort",(()=>{n.ignoreFetchAbort&&!n.allowStaleOnFetchAbort||(e(void 0),n.allowStaleOnFetchAbort&&(e=t=>c(t,!0)))}))})).then(c,(t=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=t),a(t)))),l=Object.assign(u,{__abortController:s,__staleWhileFetching:r,__returned:void 0});return void 0===e?(this.set(t,l,{...h.options,status:void 0}),e=this.#u.get(t)):this.#f[e]=l,l}#A(t){if(!this.#_)return!1;const e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof S}async fetch(t,e={}){const{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:h=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:a=this.noUpdateTTL,noDeleteOnFetchRejection:u=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:l=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:d=this.allowStaleOnFetchAbort,context:p,forceRefresh:y=!1,status:g,signal:E}=e;if(!this.#_)return g&&(g.fetch="get"),this.get(t,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:r,status:g});const m={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:r,ttl:s,noDisposeOnSet:o,size:h,sizeCalculation:c,noUpdateTTL:a,noDeleteOnFetchRejection:u,allowStaleOnFetchRejection:l,allowStaleOnFetchAbort:d,ignoreFetchAbort:f,status:g,signal:E};let b=this.#u.get(t);if(void 0===b){g&&(g.fetch="miss");const e=this.#S(t,b,m,p);return e.__returned=e}{const e=this.#f[b];if(this.#A(e)){const t=n&&void 0!==e.__staleWhileFetching;return g&&(g.fetch="inflight",t&&(g.returnedStale=!0)),t?e.__staleWhileFetching:e.__returned=e}const r=this.#I(b);if(!y&&!r)return g&&(g.fetch="hit"),this.#O(b),i&&this.#N(b),g&&this.#U(g,b),e;const s=this.#S(t,b,m,p),o=void 0!==s.__staleWhileFetching&&n;return g&&(g.fetch=r?"stale":"refresh",o&&r&&(g.returnedStale=!0)),o?s.__staleWhileFetching:s.__returned=s}}get(t,e={}){const{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:r=this.noDeleteOnStaleGet,status:s}=e,o=this.#u.get(t);if(void 0!==o){const e=this.#f[o],h=this.#A(e);return s&&this.#U(s,o),this.#I(o)?(s&&(s.get="stale"),h?(s&&n&&void 0!==e.__staleWhileFetching&&(s.returnedStale=!0),n?e.__staleWhileFetching:void 0):(r||this.delete(t),s&&n&&(s.returnedStale=!0),n?e:void 0)):(s&&(s.get="hit"),h?e.__staleWhileFetching:(this.#O(o),i&&this.#N(o),e))}s&&(s.get="miss")}#j(t,e){this.#p[e]=t,this.#d[t]=e}#O(t){t!==this.#g&&(t===this.#y?this.#y=this.#d[t]:this.#j(this.#p[t],this.#d[t]),this.#j(this.#g,t),this.#g=t)}delete(t){let e=!1;if(0!==this.#c){const n=this.#u.get(t);if(void 0!==n)if(e=!0,1===this.#c)this.clear();else{this.#D(n);const e=this.#f[n];this.#A(e)?e.__abortController.abort(new Error("deleted")):(this.#T||this.#L)&&(this.#T&&this.#s?.(e,t,"delete"),this.#L&&this.#m?.push([e,t,"delete"])),this.#u.delete(t),this.#l[n]=void 0,this.#f[n]=void 0,n===this.#g?this.#g=this.#p[n]:n===this.#y?this.#y=this.#d[n]:(this.#d[this.#p[n]]=this.#d[n],this.#p[this.#d[n]]=this.#p[n]),this.#c--,this.#E.push(n)}}if(this.#L&&this.#m?.length){const t=this.#m;let e;for(;e=t?.shift();)this.#o?.(...e)}return e}clear(){for(const t of this.#x({allowStale:!0})){const e=this.#f[t];if(this.#A(e))e.__abortController.abort(new Error("deleted"));else{const n=this.#l[t];this.#T&&this.#s?.(e,n,"delete"),this.#L&&this.#m?.push([e,n,"delete"])}}if(this.#u.clear(),this.#f.fill(void 0),this.#l.fill(void 0),this.#w&&this.#v&&(this.#w.fill(0),this.#v.fill(0)),this.#b&&this.#b.fill(0),this.#y=0,this.#g=0,this.#E.length=0,this.#a=0,this.#c=0,this.#L&&this.#m){const t=this.#m;let e;for(;e=t?.shift();)this.#o?.(...e)}}}class R{#z;#G;#$;constructor(t,e,n){this.#G=t.docExistsSpace,this.#$=n,this.#z=e}#K=(t,e={})=>{const n=t=>"string"==typeof t||"number"==typeof t?this.#$.GET(t,e.PIPELINE):t.FIELD||t.VALUE?this.#$.GET(t):t.AND?this.#$.AND(t.AND.map(n),e.PIPELINE):t.GET?this.#$.GET(t.GET,e.PIPELINE):t.NOT?this.#$.NOT(n(t.NOT.INCLUDE),n(t.NOT.EXCLUDE)):t.OR?this.#$.OR(t.OR.map(n),e.PIPELINE):t.ALL_DOCUMENTS?this.ALL_DOCUMENTS(t.ALL_DOCUMENTS):void 0;return n(t).then((t=>t.RESULT?Object.assign(t,{RESULT_LENGTH:t.RESULT.length}):{RESULT:t,RESULT_LENGTH:t.length})).then((t=>e.BUCKETS?this.#$.BUCKETS(...e.BUCKETS).then((e=>Object.assign(t,{BUCKETS:this.#$.AGGREGATION_FILTER(e,t.RESULT,!1)}))):t)).then((n=>e.FACETS?n.RESULT.length?t.ALL_DOCUMENTS?this.FACETS(...e.FACETS).then((t=>Object.assign(n,{FACETS:t}))):this.FACETS(...e.FACETS).then((t=>Object.assign(n,{FACETS:this.#$.AGGREGATION_FILTER(t,n.RESULT)}))):Object.assign(n,{FACETS:[]}):n)).then((t=>e.WEIGHT?Object.assign({RESULT:this.WEIGHT(t.RESULT,e.WEIGHT)},t):t)).then((t=>e.SCORE?this.SCORE(t.RESULT,e.SCORE).then((e=>Object.assign(t,{RESULT:e}))):t)).then((t=>Object.assign(t,e.SORT?{RESULT:this.SORT(t.RESULT,e.SORT)}:{}))).then((t=>{let n;return Object.assign(t,{RESULT:this.PAGE(t.RESULT,e.PAGE,(t=>{n=t}))},{PAGING:n})})).then((t=>e.DOCUMENTS?this.DOCUMENTS(...t.RESULT.map((t=>t._id))).then((e=>Object.assign(t,{RESULT:t.RESULT.map(((t,n)=>Object.assign(t,{_doc:e[n]})))}))):t))};#W=(t,e)=>new Promise((n=>(e=JSON.stringify(e),this.#z.has(e)?n(this.#z.get(e)):t.then((t=>this.#z.set(e,t))).then((()=>n(this.#z.get(e)))))));#Y=t=>this.DISTINCT(t).then((t=>Array.from(t.reduce(((t,e)=>t.add(e.VALUE)),new Set)).sort(((t,e)=>(t+"").localeCompare(e+"",void 0,{numeric:!0,sensitivity:"base"})))));#H=(...t)=>t.length?Promise.all(t.map((t=>this.#$.STORE.get([this.#G,t]).catch((t=>null))))):this.ALL_DOCUMENTS();#X=(t,e)=>this.#K({AND:[...t]},Object.assign({SCORE:{TYPE:"TFIDF"},SORT:!0},e));ALL_DOCUMENTS=t=>this.#$.STORE.iterator({gte:[this.#G,null],lte:[this.#G,void 0],limit:t}).all().then((t=>t.map((([t,e])=>({_id:e._id,_doc:e})))));DICTIONARY=t=>this.#W(this.#Y(t),{DICTIONARY:t||null});DISTINCT=(...t)=>this.#$.DISTINCT(...t).then((t=>[...t.reduce(((t,e)=>t.add(JSON.stringify(Object.assign(e,{VALUE:e.VALUE})))),new Set)].map(JSON.parse)));DOCUMENTS=(...t)=>this.#W(this.#H(...t),{DOCUMENTS:t});DOCUMENT_COUNT=()=>this.#$.STORE.get(["DOCUMENT_COUNT"]);DOCUMENT_VECTORS=(...t)=>Promise.all(t.map((t=>this.#$.STORE.get(["DOC",t]).catch((t=>null)))));FACETS=(...t)=>this.#$.FACETS(...t).then((t=>[...t.reduce(((t,e)=>t.add(JSON.stringify(Object.assign(e,{VALUE:e.VALUE})))),new Set)].map(JSON.parse)));PAGE=(t,e={},n=(()=>null))=>((e={NUMBER:0,SIZE:20,...e}).TOTAL=Math.ceil(t.length/e.SIZE),e.DOC_OFFSET=e.NUMBER*e.SIZE,n(e),t.slice(e.DOC_OFFSET,e.DOC_OFFSET+e.SIZE||void 0));QUERY=(t,e)=>this.#W(this.#K(t,e),{QUERY:[t,e]});SCORE=(t,e={})=>{e=Object.assign({TYPE:"TFIDF"},e);const n=t=>!e.FIELDS||e.FIELDS.includes(t.FIELD),i=t=>(t||[]).filter(n);return new Promise((r=>r("TFIDF"===e.TYPE?this.DOCUMENT_COUNT().then((e=>t.map(((t,i,r)=>{const s=Math.log((e+1)/r.length);return t._score=+(t._match||[]).filter(n).reduce(((t,e)=>t+s*+e.SCORE),0).toFixed(2),t})))):"PRODUCT"===e.TYPE?t.map((t=>({...t,_score:+i(t._match).reduce(((t,e)=>t*+e.SCORE),1).toFixed(2)}))):"CONCAT"===e.TYPE?t.map((t=>({...t,_score:i(t._match).reduce(((t,e)=>t+e.SCORE),"")}))):"SUM"===e.TYPE?t.map((t=>({...t,_score:+i(t._match).reduce(((t,e)=>t+ +e.SCORE),0).toFixed(2)}))):"VALUE"===e.TYPE?t.map((t=>({...t,_score:i(t._match).reduce(((t,e)=>t+e.VALUE),"")}))):null)))};SEARCH=(t,e)=>this.#W(this.#X(t,e),{SEARCH:[t,e]});SORT=(t,e)=>(e=Object.assign({DIRECTION:"DESCENDING",TYPE:"NUMERIC"},e||{}),t.sort(((t,e)=>t._id<e._id?-1:t._id>e._id?1:0)).sort({NUMERIC:{DESCENDING:(t,e)=>+e._score-+t._score,ASCENDING:(t,e)=>+t._score-+e._score},ALPHABETIC:{DESCENDING:(t,e)=>t._score<e._score?1:t._score>e._score?-1:0,ASCENDING:(t,e)=>t._score<e._score?-1:t._score>e._score?1:0}}[e.TYPE][e.DIRECTION]));WEIGHT=(t,e)=>t.map((t=>(t._match=t._match.map((t=>(e.forEach((e=>{let n=!1;e.FIELD&&e.VALUE?e.FIELD===t.FIELD&&e.VALUE===t.VALUE&&(n=!0):e.FIELD?e.FIELD===t.FIELD&&(n=!0):e.VALUE&&e.VALUE===t.VALUE&&(n=!0),n&&(t.SCORE=(e.WEIGHT*+t.SCORE).toFixed(2))})),t))),t)))}var N=n(6729);class U extends Error{constructor(t){super(t),this.name="TimeoutError"}}class D extends Error{constructor(t){super(),this.name="AbortError",this.message=t}}const F=t=>void 0===globalThis.DOMException?new D(t):new DOMException(t),P=t=>{const e=void 0===t.reason?F("This operation was aborted."):t.reason;return e instanceof Error?e:F(e)};var M,V=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)};class j{constructor(){M.set(this,[])}enqueue(t,e){const n={priority:(e={priority:0,...e}).priority,run:t};if(this.size&&V(this,M,"f")[this.size-1].priority>=e.priority)return void V(this,M,"f").push(n);const i=function(t,e,n){let i=0,r=t.length;for(;r>0;){const n=Math.trunc(r/2);let o=i+n;s=t[o],e.priority-s.priority<=0?(i=++o,r-=n+1):r=n}var s;return i}(V(this,M,"f"),n);V(this,M,"f").splice(i,0,n)}dequeue(){const t=V(this,M,"f").shift();return null==t?void 0:t.run}filter(t){return V(this,M,"f").filter((e=>e.priority===t.priority)).map((t=>t.run))}get size(){return V(this,M,"f").length}}M=new WeakMap;var z,G,$,K,W,Y,H,X,J,q,Q,Z,tt,et,nt,it,rt,st,ot,ht,ct,at,ut,lt,ft,dt,pt=function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n},yt=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)};class gt extends Error{}class Et extends N{constructor(t){var e,n,i,r;if(super(),z.add(this),G.set(this,void 0),$.set(this,void 0),K.set(this,0),W.set(this,void 0),Y.set(this,void 0),H.set(this,0),X.set(this,void 0),J.set(this,void 0),q.set(this,void 0),Q.set(this,void 0),Z.set(this,0),tt.set(this,void 0),et.set(this,void 0),nt.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"==typeof(t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:j,...t}).intervalCap&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(n=null===(e=t.intervalCap)||void 0===e?void 0:e.toString())&&void 0!==n?n:""}\` (${typeof t.intervalCap})`);if(void 0===t.interval||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(r=null===(i=t.interval)||void 0===i?void 0:i.toString())&&void 0!==r?r:""}\` (${typeof t.interval})`);pt(this,G,t.carryoverConcurrencyCount,"f"),pt(this,$,t.intervalCap===Number.POSITIVE_INFINITY||0===t.interval,"f"),pt(this,W,t.intervalCap,"f"),pt(this,Y,t.interval,"f"),pt(this,q,new t.queueClass,"f"),pt(this,Q,t.queueClass,"f"),this.concurrency=t.concurrency,this.timeout=t.timeout,pt(this,nt,!0===t.throwOnTimeout,"f"),pt(this,et,!1===t.autoStart,"f")}get concurrency(){return yt(this,tt,"f")}set concurrency(t){if(!("number"==typeof t&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);pt(this,tt,t,"f"),yt(this,z,"m",lt).call(this)}async add(t,e={}){return e={timeout:this.timeout,throwOnTimeout:yt(this,nt,"f"),...e},new Promise(((n,i)=>{yt(this,q,"f").enqueue((async()=>{var r,s,o;pt(this,Z,(s=yt(this,Z,"f"),++s),"f"),pt(this,K,(o=yt(this,K,"f"),++o),"f");try{if(null===(r=e.signal)||void 0===r?void 0:r.aborted)throw new gt("The task was aborted.");let i=t({signal:e.signal});e.timeout&&(i=function(t,e,n,i){let r;const s=new Promise(((s,o)=>{if("number"!=typeof e||1!==Math.sign(e))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e!==Number.POSITIVE_INFINITY){if((i={customTimers:{setTimeout,clearTimeout},...i}).signal){const{signal:t}=i;t.aborted&&o(P(t)),t.addEventListener("abort",(()=>{o(P(t))}))}r=i.customTimers.setTimeout.call(void 0,(()=>{const i=n instanceof Error?n:new U(`Promise timed out after ${e} milliseconds`);"function"==typeof t.cancel&&t.cancel(),o(i)}),e),(async()=>{try{s(await t)}catch(t){o(t)}finally{i.customTimers.clearTimeout.call(void 0,r)}})()}else s(t)}));return s.clear=()=>{clearTimeout(r),r=void 0},s}(Promise.resolve(i),e.timeout)),e.signal&&(i=Promise.race([i,yt(this,z,"m",ft).call(this,e.signal)]));const s=await i;n(s),this.emit("completed",s)}catch(t){if(t instanceof U&&!e.throwOnTimeout)return void n();i(t),this.emit("error",t)}finally{yt(this,z,"m",st).call(this)}}),e),this.emit("add"),yt(this,z,"m",ct).call(this)}))}async addAll(t,e){return Promise.all(t.map((async t=>this.add(t,e))))}start(){return yt(this,et,"f")?(pt(this,et,!1,"f"),yt(this,z,"m",lt).call(this),this):this}pause(){pt(this,et,!0,"f")}clear(){pt(this,q,new(yt(this,Q,"f")),"f")}async onEmpty(){0!==yt(this,q,"f").size&&await yt(this,z,"m",dt).call(this,"empty")}async onSizeLessThan(t){yt(this,q,"f").size<t||await yt(this,z,"m",dt).call(this,"next",(()=>yt(this,q,"f").size<t))}async onIdle(){0===yt(this,Z,"f")&&0===yt(this,q,"f").size||await yt(this,z,"m",dt).call(this,"idle")}get size(){return yt(this,q,"f").size}sizeBy(t){return yt(this,q,"f").filter(t).length}get pending(){return yt(this,Z,"f")}get isPaused(){return yt(this,et,"f")}}G=new WeakMap,$=new WeakMap,K=new WeakMap,W=new WeakMap,Y=new WeakMap,H=new WeakMap,X=new WeakMap,J=new WeakMap,q=new WeakMap,Q=new WeakMap,Z=new WeakMap,tt=new WeakMap,et=new WeakMap,nt=new WeakMap,z=new WeakSet,it=function(){return yt(this,$,"f")||yt(this,K,"f")<yt(this,W,"f")},rt=function(){return yt(this,Z,"f")<yt(this,tt,"f")},st=function(){var t;pt(this,Z,(t=yt(this,Z,"f"),--t),"f"),yt(this,z,"m",ct).call(this),this.emit("next")},ot=function(){yt(this,z,"m",ut).call(this),yt(this,z,"m",at).call(this),pt(this,J,void 0,"f")},ht=function(){const t=Date.now();if(void 0===yt(this,X,"f")){const e=yt(this,H,"f")-t;if(!(e<0))return void 0===yt(this,J,"f")&&pt(this,J,setTimeout((()=>{yt(this,z,"m",ot).call(this)}),e),"f"),!0;pt(this,K,yt(this,G,"f")?yt(this,Z,"f"):0,"f")}return!1},ct=function(){if(0===yt(this,q,"f").size)return yt(this,X,"f")&&clearInterval(yt(this,X,"f")),pt(this,X,void 0,"f"),this.emit("empty"),0===yt(this,Z,"f")&&this.emit("idle"),!1;if(!yt(this,et,"f")){const t=!yt(this,z,"a",ht);if(yt(this,z,"a",it)&&yt(this,z,"a",rt)){const e=yt(this,q,"f").dequeue();return!!e&&(this.emit("active"),e(),t&&yt(this,z,"m",at).call(this),!0)}}return!1},at=function(){yt(this,$,"f")||void 0!==yt(this,X,"f")||(pt(this,X,setInterval((()=>{yt(this,z,"m",ut).call(this)}),yt(this,Y,"f")),"f"),pt(this,H,Date.now()+yt(this,Y,"f"),"f"))},ut=function(){0===yt(this,K,"f")&&0===yt(this,Z,"f")&&yt(this,X,"f")&&(clearInterval(yt(this,X,"f")),pt(this,X,void 0,"f")),pt(this,K,yt(this,G,"f")?yt(this,Z,"f"):0,"f"),yt(this,z,"m",lt).call(this)},lt=function(){for(;yt(this,z,"m",ct).call(this););},ft=async function(t){return new Promise(((e,n)=>{t.addEventListener("abort",(()=>{n(new gt("The task was aborted."))}),{once:!0})}))},dt=async function(t,e){return new Promise((n=>{const i=()=>{e&&!e()||(this.off(t,i),n())};this.on(t,i)}))};class mt{#z;#$;#J;#q;constructor(t,e,n){this.#z=e,this.#$=n,this.#J=t,this.#q=new Et({concurrency:1}),this.#Q(0)}#Q=t=>this.#$.STORE.get(["DOCUMENT_COUNT"]).then((e=>this.#$.STORE.put(["DOCUMENT_COUNT"],+e+(+t||0)))).catch((t=>this.#$.STORE.put(["DOCUMENT_COUNT"],0)));#Z=(t,e)=>{this.#z.clear();const n={...this.#J,...e};return((t,e)=>{const n=t=>"string"==typeof t||t instanceof String,i=(t,r)=>new Promise((async s=>{return null===t?s([null,"1.00"]):(o=t)&&0===Object.keys(o).length&&Object.getPrototypeOf(o)===Object.prototype?s([[],"1.00"]):Number.isInteger(t)?s([t,t]):n(t)?s(e.tokenizer(t,r,e)):(t=>"object"==typeof t&&null!==t&&!Array.isArray(t))(t)?s((h=t,new Promise((async t=>{const n={};for(const t in h)n[t]=await i(h[t],t,e);return t(n)})))):(t=>Array.isArray(t))(t)?s((c=t,Promise.all(c.map(i)))):s(t);var o,h,c}));return Promise.all(t.map((async t=>new Promise((async r=>{n(t)&&(t={body:t}),Object.prototype.hasOwnProperty.call(t,"_id")||(t._id=e.idGenerator.next().value);const s={};for(const e in t)s[e]="_id"!==e?await i(t[e],e):t[e];return r(s)})))))})(t,n).then((t=>this.#$.PUT(t,e))).then((e=>this.PUT_RAW(t,e.map((t=>t._id)),!n.storeRawDocs).then((()=>this.#Q(e.filter((t=>"CREATED"===t.status)).length))).then((()=>e))))};#tt=t=>this.#$.DELETE(t).then((e=>this.DELETE_RAW(...t).then((()=>this.#Q(-e.filter((t=>"DELETED"===t.status)).length))).then((()=>this.#z.clear())).then((()=>e))));DELETE=(...t)=>this.#tt(t);DELETE_RAW=(...t)=>Promise.all(t.map((t=>this.#$.STORE.del([this.#J.docExistsSpace,t]))));FLUSH=()=>this.#$.STORE.clear().then((()=>{this.#z.clear();const t=Date.now();return this.#$.STORE.batch([{type:"put",key:["~CREATED"],value:t},{type:"put",key:["~LAST_UPDATED"],value:t},{type:"put",key:["DOCUMENT_COUNT"],value:0}])})).then((()=>!0));IMPORT=t=>(this.#z.clear(),Promise.resolve(this.#$.IMPORT(t)));PUT=(t,e)=>this.#q.add((()=>this.#Z(t,e)));PUT_RAW=(t,e,n)=>Promise.all(t.map(((t,i)=>this.#$.STORE.put([this.#J.docExistsSpace,e[i]],n?{}:t)))).then((n=>(this.#z.clear(),t.map(((t,n)=>({_id:e[n],status:"OK",operation:"_PUT_RAW"}))))))}class bt{constructor(t={}){var e;t={cacheLength:1e3,caseSensitive:!1,docExistsSpace:"DOC_RAW",idGenerator:function*(){let t=0;for(;;)yield Date.now()+"-"+t++}(),skipFields:[],ngrams:{},replace:{},storeRawDocs:!0,stopwords:[],storeVectors:!0,tokenSplitRegex:/[\p{L}\d]+/gu,tokenizer:l,...t},this.INDEX=new v({...t,isLeaf:t=>Array.isArray(t)&&2===t.length&&t.every((t=>"string"==typeof t||"number"==typeof t||null===t))}),this._CACHE=new C({max:t.cacheLength}),this.r=new R(t,this._CACHE,this.INDEX),this.w=new mt(t,this._CACHE,this.INDEX),e=this.INDEX,new Promise(((t,n)=>{const i=["CREATED_WITH"],r="search-index@5.0.0-rc1";return e.STORE.get(i).then((e=>r===e?t():n(new Error("This index was created with "+e+", you are running "+r)))).catch((n=>e.STORE.put(i,r).then(t)))}))}ALL_DOCUMENTS=t=>this.r.ALL_DOCUMENTS(t);BUCKETS=(...t)=>this.INDEX.BUCKETS(...t);CREATED=()=>this.INDEX.CREATED();DELETE=(...t)=>this.w.DELETE(...t);DELETE_RAW=(...t)=>this.w.DELETE_RAW(...t);DICTIONARY=t=>this.r.DICTIONARY(t);DISTINCT=(...t)=>this.r.DISTINCT(...t);DOCUMENTS=(...t)=>this.r.DOCUMENTS(...t);DOCUMENT_COUNT=()=>this.r.DOCUMENT_COUNT();DOCUMENT_VECTORS=(...t)=>this.r.DOCUMENT_VECTORS(...t);EXPORT=()=>this.INDEX.EXPORT();FACETS=(...t)=>this.r.FACETS(...t);FIELDS=()=>this.INDEX.FIELDS();FLUSH=()=>this.w.FLUSH();IMPORT=t=>this.INDEX.IMPORT(t);LAST_UPDATED=()=>this.INDEX.LAST_UPDATED();MAX=t=>this.INDEX.MAX(t);MIN=t=>this.INDEX.MIN(t);PUT=(t,e)=>this.w.PUT(t,e);PUT_RAW=(t,e,n)=>this.w.PUT_RAW(t,e,n);QUERY=(t,e)=>this.r.QUERY(t,e);SEARCH=(t,e)=>this.r.SEARCH(t,e);TOKENIZATION_PIPELINE_STAGES={SPLIT:r,SKIP:s,LOWCASE:o,REPLACE:h,NGRAMS:c,STOPWORDS:a,SCORE_TERM_FREQUENCY:u};_AND=(t,e)=>this.INDEX.AND(t,e);_BUCKET=t=>this.INDEX.BUCKET(t);_GET=(t,e)=>this.INDEX.GET(t,e);_NOT=(t,e)=>this.INDEX.NOT(t,e);_OR=(t,e)=>this.INDEX.OR(t,e);_PAGE=(t,e)=>this.r.PAGE(t,e);_SORT=(t,e)=>this.r.SORT(t,e)}var vt=n(1708);const wt=async(t,e,n)=>{var i;function r(t){if(!t)return!1;!function(t){for(var e=0;e<t.length;e++)t[e].classList.remove("autocomplete-active")}(t),i>=t.length&&(i=0),i<0&&(i=t.length-1),t[i].classList.add("autocomplete-active")}function s(e){for(var n=document.getElementsByClassName("autocomplete-items"),i=0;i<n.length;i++)e!=n[i]&&e!=t&&n[i].parentNode.removeChild(n[i])}t.addEventListener("input",(async function(r){const o=await e(this.value);var h,c,a=this.value;if(s(),!a)return!1;i=-1,(h=document.createElement("DIV")).setAttribute("id",this.id+"autocomplete-list"),h.setAttribute("class","autocomplete-items"),h.setAttribute("style","position: absolute; background-color:cyan;"),document.getElementById("suggestions").appendChild(h),o.forEach((e=>{(c=document.createElement("DIV")).innerHTML="<strong>"+e.substr(0,a.length)+"</strong>",c.innerHTML+=e.substr(a.length),c.innerHTML+="<input type='hidden' value='"+e+"'>",c.addEventListener("click",(function(e){t.value=this.getElementsByTagName("input")[0].value,s(),n()})),h.appendChild(c)}))})),t.addEventListener("keydown",(function(t){var e=document.getElementById(this.id+"autocomplete-list");e&&(e=e.getElementsByTagName("div")),40==t.keyCode?(i++,r(e)):38==t.keyCode?(i--,r(e)):13==t.keyCode||9==t.keyCode?(t.preventDefault(),i>-1?e&&e[i].click():s()):27==t.keyCode&&s()})),document.addEventListener("click",(function(t){s(t.target)}))},Tt=({index:t=null,count:e={},hits:n={},refiners:i=[],searchInput:r={},paging:s={}}={})=>{const o=(t,e)=>(console.log(e),`\n    <input class="filter-select"\n           id=${t.FIELD+":"+t.VALUE}\n           name=${t.FIELD+":"+t.VALUE}\n           type="checkbox"\n           data-field=${t.FIELD}\n           data-value=${t.VALUE}\n           ${e?"checked":""}>\n    <label for=${t.FIELD+":"+t.VALUE}>${t.VALUE} (${t._id.length})</label>\n    <br>`);(e={template:t=>`${t} hits`,elementId:"count",...e}).el=document.getElementById(e.elementId),(r={elementId:"searchbox",...r}).el=document.getElementById(r.elementId),(n={template:t=>`<p>${JSON.stringify(t)}</p>`,elementId:"hits",...n}).el=document.getElementById(n.elementId),i=i.map((t=>({el:document.getElementById(t.elementId),sort:(t,e)=>{t.VALUE.localeCompare(e.VALUE)},...t}))),s.el=document.getElementById(s.elementId);let h={NUMBER:0,SIZE:s.pageSize||3};const c=()=>(r.el.value.length+u.length?t.SEARCH([...r.el.value.split(/\s+/).filter((t=>t)),...u],{FACETS:[{FIELD:["month"]},{FIELD:["year"]}],DOCUMENTS:!0,PAGE:h}):t.QUERY({ALL_DOCUMENTS:!0},{FACETS:[{FIELD:["month","year"]}],PAGE:h})).then((t=>({result:t}))).then((t=>(console.log(t),t))).then(a),a=t=>{n.el.innerHTML=t.result.RESULT.map((({_doc:t})=>n.template(t))).join("\n"),e.el.innerHTML=e.template(t.result.RESULT_LENGTH),l(t.result.FACETS),(t=>{s.el.innerHTML=(t=>{let e=0,n=t.TOTAL;t.TOTAL>7&&(e=t.NUMBER>3?t.NUMBER-3:0,n=7+e),n>t.TOTAL&&(e=t.TOTAL-6-1,n=t.TOTAL);const i=(t,e,n)=>(console.log(e),`\n    <li class="page-item ${n?"disabled":""}">\n      <a class="page-link" data-page=${e} href="#">\n        ${t}\n      </a>\n    </li>`);return`\n     <ul class="pagination">\n       ${i("First",0,0==t.NUMBER)}\n       ${i("",t.NUMBER-1,0==t.NUMBER)}\n       ${(()=>{let i="";for(let o=e;o<n;o++)i+=(r=o+1,`\n    <li class="page-item ${(s=o)==t.NUMBER?"active":""}">\n      <a class="page-link" data-page=${s} href="#">\n        ${r}\n      </a>\n    </li>`);var r,s;return i})()}\n       ${i("",t.NUMBER+1,t.NUMBER>=t.TOTAL-1)}\n       ${i("Last",t.TOTAL-1,t.NUMBER>=t.TOTAL-1)}\n     </ul>`})(t.PAGING);const e=document.getElementsByClassName("page-link");for(let t=0;t<e.length;t++)e[t].addEventListener("mousedown",(function(t){h.NUMBER=+t.target.attributes["data-page"].value,console.log(t.target.attributes["data-page"].value),c()}))})(t.result)};let u=[];const l=t=>{i.forEach((e=>{e.el.innerHTML=`<h2>${e.title}</h2>`+t.filter((t=>t.FIELD==e.field)).sort(e.sort).reduce(((t,e)=>t+o(e,u.includes(e.FIELD+":"+e.VALUE))),""),u.forEach((t=>{if(!document.getElementById(t)){const[n,i]=t.split(":");e.el.innerHTML+=o({FIELD:n,VALUE:i,_id:[]},!0)}}))}));const e=document.getElementsByClassName("filter-select");for(let t=0;t<e.length;t++)e[t].addEventListener("input",(function(t){const e=t.target.attributes["data-field"].value+":"+t.target.attributes["data-value"].value;t.target.checked?u.push(e):u=u.filter((t=>t!==e)),c()}))};r.el.addEventListener("input",(function(t){h.NUMBER=0,c(this.value)})),wt(document.getElementById(r.elementId),t.DICTIONARY,c),c()};class _t{constructor(t={}){return new bt({Level:vt.v,...t})}}const Lt=t=>Tt(t)})();var r=i.W,s=i.ui;export{r as SearchIndex,s as ui};